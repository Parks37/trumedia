var I=Object.defineProperty;var c=(e,t)=>{for(var r in t)I(e,r,{get:t[r],enumerable:!0})};import O from"bowser";var u=document.createElement("input");u.type="time";var k=u.type==="time",l=(e=window.navigator.userAgent)=>O.getParser(e),D=(e=window.navigator)=>e.platform==="MacIntel"&&e.maxTouchPoints>1,p=(e=l())=>e.getPlatformType()==="tablet"||e.getPlatformType()==="mobile",L=(e=window.navigator.userAgent,t=window.navigator)=>{let r=l(e);return{...r.getResult(),features:{input:{time:k},fileSystem:!p(r)&&!D(t)},mobile:p(r)}},E=()=>window.innerHeight>window.innerWidth?"portrait":"landscape",C={...L(),findOrientation:E};var m={get:e=>{let t=new RegExp(`(?:(?:^|.*;\\s*)${e}\\s*\\=\\s*([^;]*).*$)|^.*$`);return document.cookie.replace(t,"$1")||null},set:(e,t,r)=>{let n="",o="";r&&(n=r.expires?`Expires=${r.expires.toUTCString()};`:"",o=r.path?`Path=${r.path}`:document.location.pathname);let s=`${e}=${t};${n}${o}`;return document.cookie=s,r&&r.onCookieSet&&r.onCookieSet(s),m.get(e)},delete:e=>m.set(e,"",{expires:new Date(1e3)})},$=m;var f={};c(f,{asObject:()=>U,format:()=>w,truncate:()=>b});import N from"numeral";import d from"is-number";import h from"pipr";var P=["0a","0.00a","0.0a"],T=e=>e<3?"0.00":e<5?"0,0":P[e%3],b=e=>{if(!e&&e!==0)return"";if(!d(e))throw new Error("Input must be parsable as a Number.");let t=N(e),r=t.format("0",h([Math.floor,Math.abs])),n=T(r.length);return t.format(n).toUpperCase()},R=e=>Number(e.replace(/[^0-9.-]/g,"")),M=e=>e.indexOf(".")<0,j=e=>e.replace(/[^0-9.]/g,"").split(".").slice(-1).pop().length,z=e=>M(e)?0:j(e),F=e=>({decimals:z(e),suffix:e.replace(/[^A-Z]/g,""),truncated:e,value:R(e)}),w=e=>new Intl.NumberFormat("en-US",{currency:"USD",style:"currency"}).format(Number(e)),U=e=>{if(!d(e))throw new Error("Input must be parsable as a Number.");return{...h([b,F])(e),numberText:w(e)}};var A=e=>e;import{getProperty as B}from"dot-prop";var y={month:"2-digit",day:"2-digit",year:"2-digit"},v={mdy:new Intl.DateTimeFormat("en-US",y).format,dmy:new Intl.DateTimeFormat("en-GB",y).format},V=(e,t="mdy")=>{let r=e;if(typeof e=="string"){let n=Number(e.substring(0,4)),o=Number(e.substring(5,7))-1,s=Number(e.substring(8,10));r=new Date(n,o,s)}return B(v,t,v.mdy)(Number(r))},J=V;var H=e=>e||e===0?e:"";var G=e=>{let t=0;for(let r=0;r<e.length;r++)t=(t<<5)-t+e.charCodeAt(r);return Math.abs(t&~(0<<31)).toString(16)},K=G;var W=(e,t)=>r=>{console.warn("@dmsi/core keyEvents is deprecated; please switch to @wedgekit/utils handleKeyEvent");let n;typeof e=="string"?n=[e]:(n=e,n.includes(" ")&&n.push("Spacebar")),n.includes(r.key)&&(n.includes("Spacebar")&&r.preventDefault(),t(r))},q={create:W};import Y from"reconnecting-websocket";import{v4 as _}from"uuid";var a="dmsi:",Z={getItem:e=>window.localStorage.getItem(`${a}${e}`),setItem:(e,t)=>window.localStorage.setItem(`${a}${e}`,t),removeItem:e=>window.localStorage.removeItem(`${a}${e}`)},Q={getItem:e=>window.sessionStorage.getItem(`${a}${e}`),setItem:(e,t)=>window.sessionStorage.setItem(`${a}${e}`,t),removeItem:e=>window.sessionStorage.removeItem(`${a}${e}`)},X={ls:Z,ss:Q},g=X;var i=class{static get ERROR(){return 0}static get INFO(){return 1}static get DEBUG(){return 2}static get TRACE(){return 3}constructor(t,r=Y,n=g.ls){if(!t||typeof t!="object")throw new Error("options are required, and must be an object");if(!t.url)throw new Error("options must include a url property");if(this.batchSize=t.batchSize||50,this.environment=t.environment,this.headers=t.headers||{"Content-Type":"application/json"},this.url=t.url,this.username=t.username,this.storage=n,this.url.indexOf("ws://")>-1||this.url.indexOf("wss://")>-1)this.websocket=new r(this.url),this.websocket.onopen=()=>{let o=this.batchLogs(JSON.parse(this.storage.getItem("logs")));o&&o.length>0&&(o.forEach(s=>{this.send(s)}),this.storage.setItem("logs",JSON.stringify([])))};else throw new Error("Invalid protocol in URL. Must be ws:// or wss://")}batchLogs(t){return!t||t.length===0?[]:t.length<=this.batchSize?[t]:t.map((r,n)=>n%this.batchSize==0?t.slice(n,n+this.batchSize):null).filter(r=>r)}log(t,r,n){this.send([{context:navigator.userAgent,message:t,transactionID:n||_(),username:this.username,environment:this.environment,level:r}])}send(t,r=!1){if(this.websocket&&this.websocket.readyState===this.websocket.OPEN)this.websocket.send(JSON.stringify(t));else if(!r){let n=JSON.parse(this.storage.getItem("logs"))||[];this.storage.setItem("logs",JSON.stringify(n.concat(t)))}}setEnvironment(t){this.environment=t}setUsername(t){this.username=t}error(t,r){this.log(t,i.ERROR,r)}info(t,r){this.log(t,i.INFO,r)}debug(t,r){this.log(t,i.DEBUG,r)}trace(t,r){this.log(t,i.TRACE,r)}},ee=i;var te=(e,t,r=!1)=>Object.keys(e).reduce((n,o)=>{let s=t(o,e[o]);return!r&&typeof s=="undefined"?n:{...n,[o]:s}},{}),re=te;var ne=(e,t)=>Object.keys(e).reduce((r,n)=>({...r,[n]:t(e[n])}),{}),oe=ne;var se=e=>{let t=[void 0,void 0];try{t[1]=e()}catch(r){t[0]=r}return t},ie=se;var x={};c(x,{changeMomentTimezone:()=>ae,mergeDateTime:()=>me});import S from"moment-timezone";var ae=(e,t,r=!1)=>{if(e&&S.isMoment(e)&&e.isValid()){if(r){let n={year:e.year(),month:e.month(),date:e.date(),hour:e.hour(),minute:e.minute()};return S.tz(n,t)}return e.tz(t)}return null},me=(e,t)=>e?e.set({hour:t?t.hour():0,minute:t?t.minute():0}):null;import ge from"react";var ce=(e,t)=>({className:r,...n})=>{let o={[t]:r};return ge.createElement(e,{...n,...o})},ue=ce;export{ee as Logger,C as browser,$ as cookies,f as decimal,A as formatCharacter,J as formatDate,H as formatInteger,K as hash,q as keyEvents,re as mapObject,oe as mapValues,ie as prettyCatch,g as storage,x as timezone,ue as withCustomClassProp};
