// src/components/Multiselect/Multiselect.tsx
import React5 from "react";
import {browser} from "@dmsi/core";

// src/components/shared/Dropdown/Dropdown.tsx
import React3, {useRef as useRef2, useState as useState2} from "react";
import mergeRefs from "react-merge-refs";
import {v4 as uuid} from "uuid";
import {Chevron} from "@wedgekit/icons";
import InfoButton from "@wedgekit/info-button";
import primitives4, {FieldStatusWrapper, Row} from "@wedgekit/primitives";
import {handleKeyEvent} from "@wedgekit/utils";

// src/components/shared/Dropdown/styled/Badge.tsx
import styled from "styled-components";
import color from "@wedgekit/color";
import primitives, {getBasePx} from "@wedgekit/primitives";
var Badge = styled.div`
  grid-column: 2/3;
  margin-right: ${getBasePx(3)};
  height: ${getBasePx(6)};
  border-radius: ${primitives.base * 3}px;
  text-align: center;
  background-color: ${color.B200};
  color: ${color.B600};
  font-family: ${primitives.fontFamily};
  font-weight: ${primitives.fontWeight.link};
  line-height: 1.5rem;
  font-size: ${primitives.fontSize.input}px;
  ${({children}) => {
  const charCount = (children == null ? void 0 : children.toString().length) || 0;
  return `width: ${primitives.base * (4 + 2 * charCount)}px;`;
}};
`;
var Badge_default = Badge;

// src/components/shared/Dropdown/styled/Caret.tsx
import styled2 from "styled-components";
import {getBasePx as getBasePx2} from "@wedgekit/primitives";
var Caret = styled2.div`
  grid-column: 3/4;
  height: ${getBasePx2(4)};
  width: ${getBasePx2(4)};
`;
var Caret_default = Caret;

// src/components/shared/Dropdown/styled/DropdownWrapper.tsx
import styled3 from "styled-components";
import color2 from "@wedgekit/color";
import primitives2, {UpdatedInputMixin, getBasePx as getBasePx3} from "@wedgekit/primitives";
var Dropdown = styled3.div`
  cursor: pointer;
  ${UpdatedInputMixin}
  align-items: center;
  display: inline-grid;
  grid-template-columns: minmax(0, 1fr) min-content min-content;
  padding: 0 ${getBasePx3(3)};
  width: 100%;
  border: ${({disabled, popoverOpen}) => !disabled && popoverOpen && `${primitives2.border.width.standard}px solid ${color2.B500}`};
  box-shadow: ${({disabled, popoverOpen}) => !disabled && popoverOpen && `inset 0 0 0 .5px ${color2.B500}`};
  &:focus {
  }
`;
var DropdownWrapper_default = Dropdown;

// src/components/shared/Dropdown/styled/DropdownText.ts
import styled4 from "styled-components";
import {Text} from "@wedgekit/primitives";
import colors from "@wedgekit/color";
var DropdownText = styled4(Text)`
  color: ${({disabled, isPlaceholder}) => (disabled || isPlaceholder) && colors.N400};
  grid-column: 1/2;
  text-overflow: ellipsis;
  overflow: hidden;
  white-space: nowrap;
`;
var DropdownText_default = DropdownText;

// src/components/shared/Dropdown/styled/Label.tsx
import styled5 from "styled-components";
import {Label as BaseLabel} from "@wedgekit/primitives";
var Label = styled5(BaseLabel)``;
var Label_default = Label;

// src/components/shared/List/List.tsx
import React2, {useEffect as useEffect2, useRef, useState} from "react";
import Button from "@wedgekit/button";
import {useContainerEvent} from "@wedgekit/hooks";

// src/components/shared/List/utils/getNewValue.ts
var getNewValue = ({
  multiple = false,
  options,
  filteredOptions = options,
  currentIdx,
  previousIdx,
  shiftDown,
  value
}) => {
  if (!multiple) {
    return [filteredOptions[currentIdx].id];
  }
  const [startChangeIdx, endChangeIdx] = [currentIdx, previousIdx].sort();
  return options.reduce((newValue, option) => {
    const currentlySelected = value.includes(option.id);
    const optionIdx = filteredOptions.findIndex((filteredOption) => filteredOption.id === option.id);
    if (typeof optionIdx !== "number") {
      if (currentlySelected) {
        return newValue.concat(option.id);
      }
      return newValue;
    }
    if (shiftDown) {
      const addOption2 = startChangeIdx <= optionIdx && optionIdx <= endChangeIdx;
      if (currentlySelected || addOption2) {
        return newValue.concat(option.id);
      }
    }
    const toggleOption = currentIdx === optionIdx;
    const addOption = currentlySelected || toggleOption;
    const removeOption = currentlySelected && toggleOption;
    if (addOption && !removeOption) {
      return newValue.concat(option.id);
    }
    return newValue;
  }, []);
};
var getNewValue_default = getNewValue;

// src/components/shared/List/utils/getNewIndex.ts
var getNewIndex_default = (startIdx, move, listLength) => {
  const a = startIdx + move;
  const n = listLength;
  return (a % n + n) % n;
};

// src/components/shared/List/utils/withEscapeWatcher.tsx
import React, {useEffect} from "react";
var withEscapeWatcher = (Component) => (props) => {
  useEffect(() => {
    const handleKeyDown = (e) => {
      if (e.key === "Escape") {
        e.stopPropagation();
        if (props.onEscape) {
          props.onEscape(e);
        }
        if (props.toggleRef && props.toggleRef.current) {
          props.toggleRef.current.focus();
        }
      }
    };
    window.addEventListener("keydown", handleKeyDown, true);
    return () => window.removeEventListener("keydown", handleKeyDown, true);
  }, []);
  return /* @__PURE__ */ React.createElement(Component, {
    ...props
  });
};
var withEscapeWatcher_default = withEscapeWatcher;

// src/components/shared/List/styled/ActionBar.tsx
import styled6 from "styled-components";
import {getBasePx as getBasePx4} from "@wedgekit/primitives";
var ActionBar = styled6.div`
  position: relative;
  display: flex;
  justify-content: center;
  button {
    margin: ${getBasePx4(2)};
  }
  box-shadow: 0 -2px 4px 0 rgba(0, 0, 0, 0.1);
`;
var ActionBar_default = ActionBar;

// src/components/shared/List/styled/Filter.tsx
import styled7 from "styled-components";
import Input from "@wedgekit/input";
import {getBasePx as getBasePx5} from "@wedgekit/primitives";
var Filter = styled7(Input)`
  margin-top: 0px;
  margin-bottom: ${getBasePx5(3)};
`;
var Filter_default = Filter;

// src/components/shared/List/styled/MultiselectOption.tsx
import styled8 from "styled-components";
import Checkbox, {StyledLabel} from "@wedgekit/checkbox";
import color3 from "@wedgekit/color";
var getBackgroundColor = (active, value) => {
  if (value) {
    if (active) {
      return color3.B100;
    }
    return color3.B200;
  }
  if (active) {
    return color3.N100;
  }
  return color3.N050;
};
var MultiselectOption = styled8(Checkbox)`
  box-sizing: border-box;
  margin-bottom: 4px;
  padding: 0 4px;
  width: 100%;

  &::first-child {
    margin-top: 12px;
  }

  &:last-child {
    margin-bottom: 0px;
  }

  ${StyledLabel} {
    background: ${({active, value}) => getBackgroundColor(active, value)};
    font-weight: 400;
    user-select: none;
    margin: 0 -16px;
    border-radius: 0;
    padding: 6px 12px;

    &:hover {
      background: ${({value}) => value ? color3.B100 : color3.N100};
      label {
        color: ${color3.N600};
      }
    }
  }
`;
var MultiselectOption_default = MultiselectOption;

// src/components/shared/List/styled/OptionList.tsx
import styled9 from "styled-components";
var OptionList_default = styled9.div`
  &:focus {
    outline: none;
  }
`;

// src/components/shared/List/styled/OptionText.tsx
import styled10 from "styled-components";
import {Text as Text2} from "@wedgekit/primitives";
var OptionText = styled10(Text2)`
  pointer-events: none;
  margin: 8px 0px;
  line-height: 1.5rem;

  &:focus {
    outline: none;
  }
`;
var OptionText_default = OptionText;

// src/components/shared/List/styled/OptionsWrapper.tsx
import styled11 from "styled-components";
import {InputWrapper} from "@wedgekit/input";
import primitives3, {getBasePx as getBasePx6} from "@wedgekit/primitives";
var OptionWrapper = styled11.div`
  overflow-y: auto;
  max-height: 30vh;
  width: ${({toggleRef}) => toggleRef.current && `${toggleRef.current.clientWidth - primitives3.base * 6}px`};
  padding: ${getBasePx6(3)};

  ${InputWrapper} {
    margin: 0px;
  }
`;
var OptionsWrapper_default = OptionWrapper;

// src/components/shared/List/styled/SelectOption.tsx
import styled12 from "styled-components";
import color4 from "@wedgekit/color";
import {CursorMixin, getBasePx as getBasePx7} from "@wedgekit/primitives";
var getBackgroundColor2 = (value, active) => {
  if (value) {
    if (active) {
      return color4.B100;
    }
    return color4.B200;
  }
  if (active) {
    return color4.N100;
  }
  return color4.N050;
};
var SelectOption = styled12.div`
  align-content: center;
  background: ${({value, active}) => getBackgroundColor2(value, active)};
  cursor: pointer;
  display: flex;
  margin: 0 -${getBasePx7(3)} ${getBasePx7(1)} -${getBasePx7(3)};
  padding: 0 ${getBasePx7(3)};
  ${CursorMixin};
  transition: background 0.2s ease-out;

  & div {
    flex: 1;
  }

  &:focus {
    outline: none;
  }

  label {
    font-weight: normal;
    &:focus {
      color: ${color4.N600};
    }
  }

  &:hover {
    background: ${({value}) => value ? color4.B100 : color4.N100};
    label {
      color: ${color4.N600};
    }
  }
`;
var SelectOption_default = SelectOption;

// src/components/shared/List/styled/Space.tsx
import styled13 from "styled-components";
var Space = styled13.div`
  flex: 1;
`;
var Space_default = Space;

// src/components/shared/List/styled/StyledPopover.tsx
import styled14 from "styled-components";
import color5 from "@wedgekit/color";
import Popover from "@wedgekit/popover";
var StyledPopover_default = styled14(Popover)`
  background: ${color5.N050};
`;

// src/components/shared/List/List.tsx
var List = (props) => {
  const {
    actionBar,
    filter: displayFilter,
    filterPlaceholder,
    label,
    multiple,
    options,
    toggleRef,
    value,
    onBlur,
    onChange,
    onEscape,
    onSelect
  } = props;
  const activeOptionRef = useRef(null);
  const internalFocusRef = useRef(null);
  const checkboxListRef = useRef(null);
  const filterRef = useRef(null);
  const [filter, setFilter] = useState("");
  const [filteredOptions, setFilteredOptions] = useState(options.filter((option) => option.label.toLowerCase().includes(filter.toLowerCase())));
  const [activeOptionIdx, setActiveOptionIdx] = useState(!!value === !![] ? 0 : filteredOptions.findIndex((option) => value.includes(option.id)));
  const [allSelected, setAllSelected] = useState(value === filteredOptions.map((option) => option.id));
  useEffect2(() => {
    var _a;
    (_a = activeOptionRef.current) == null ? void 0 : _a.scrollIntoView({behavior: "smooth", block: "nearest"});
  }, [activeOptionIdx]);
  useEffect2(() => {
    if (displayFilter) {
      filterRef.current.focus();
    } else {
      checkboxListRef.current.focus();
    }
  }, []);
  useContainerEvent(internalFocusRef, {
    scroll: (e, inside) => {
      if (!inside && onEscape) {
        onEscape(e);
      }
    }
  });
  const handleFilterChange = (newFilter) => {
    setFilter(newFilter);
    setFilteredOptions(options.filter((option) => option.label.toLowerCase().includes(newFilter.toLowerCase())));
  };
  const handleClick = (event) => {
    const option = event.target;
    const currentIdx = parseInt(option.getAttribute("data-idx"), 10);
    const newValue = getNewValue_default({
      multiple,
      options,
      filteredOptions,
      currentIdx,
      previousIdx: activeOptionIdx,
      shiftDown: event.shiftKey,
      value
    });
    onChange(newValue, event);
    if (onSelect) {
      onSelect(event);
    }
    setActiveOptionIdx(currentIdx);
  };
  const handleKeyDown = (event) => {
    switch (event.key) {
      case "ArrowDown":
        event.preventDefault();
        setActiveOptionIdx(getNewIndex_default(activeOptionIdx, 1, filteredOptions.length));
        break;
      case "ArrowUp":
        event.preventDefault();
        setActiveOptionIdx(getNewIndex_default(activeOptionIdx, -1, filteredOptions.length));
        break;
      case "End":
        event.preventDefault();
        setActiveOptionIdx(filteredOptions.length - 1);
        break;
      case "Home":
        event.preventDefault();
        setActiveOptionIdx(0);
        break;
      case " ":
      case "SpaceBar":
        event.preventDefault();
        activeOptionRef.current.click();
        break;
      default:
    }
  };
  const handleClearAll = (event) => {
    setAllSelected(false);
    onChange([], event);
  };
  const handleSelectAll = (event) => {
    if (allSelected) {
      handleClearAll(event);
    } else {
      const allValues = filteredOptions.reduce((acc, cur) => {
        acc.push(cur.id);
        return acc;
      }, []);
      setAllSelected(true);
      onChange(allValues, event);
    }
  };
  const handleBlur = (event) => {
    const internalFocus = !!internalFocusRef.current && event.relatedTarget instanceof Node && internalFocusRef.current.contains(event.relatedTarget);
    if (!internalFocus && onBlur) {
      onBlur(event);
    }
  };
  return /* @__PURE__ */ React2.createElement(StyledPopover_default, {
    node: toggleRef.current,
    ref: internalFocusRef,
    onExit: onEscape,
    enabled: false
  }, /* @__PURE__ */ React2.createElement(OptionsWrapper_default, {
    "data-parent": label,
    toggleRef,
    tabIndex: -1,
    onBlur: handleBlur
  }, displayFilter && /* @__PURE__ */ React2.createElement(Filter_default, {
    "data-parent": label,
    fullWidth: true,
    label: `Filter ${label} select`,
    labelHidden: true,
    placeholder: filterPlaceholder || "Search",
    ref: filterRef,
    value: filter,
    onChange: (newFilter) => {
      handleFilterChange(newFilter);
    },
    onKeyDown: handleKeyDown,
    status: "default"
  }), /* @__PURE__ */ React2.createElement(OptionList_default, {
    "aria-label": label,
    "data-parent": label,
    id: `${label}-listbox`,
    role: "listbox",
    ref: checkboxListRef,
    tabIndex: displayFilter ? -1 : 0,
    onKeyDown: handleKeyDown
  }, filteredOptions.map((option, idx) => multiple ? /* @__PURE__ */ React2.createElement(MultiselectOption_default, {
    active: activeOptionIdx === idx,
    "data-idx": idx,
    "data-parent": label,
    disabled: option.disabled,
    id: `${label}-${option.id}`,
    key: `option-${option.id}`,
    label: option.label,
    name: option.id,
    ref: idx === activeOptionIdx ? activeOptionRef : void 0,
    role: "option",
    tabIndex: -1,
    value: multiple ? value.includes(option.id) : value[0] === option.id,
    onChange: () => {
    },
    onClick: handleClick
  }) : /* @__PURE__ */ React2.createElement(SelectOption_default, {
    active: activeOptionIdx === idx,
    "aria-label": option.label,
    "aria-selected": value[0] === option.id,
    "data-parent": label,
    "data-idx": idx,
    disabled: option.disabled,
    id: `${option.id}`,
    key: `option-${option.id}`,
    ref: idx === activeOptionIdx ? activeOptionRef : void 0,
    role: "option",
    tabIndex: -1,
    value: value[0] === option.id,
    onClick: handleClick
  }, /* @__PURE__ */ React2.createElement(OptionText_default, {
    "data-parent": label,
    tabIndex: -1
  }, option.label))))), multiple && !!actionBar && /* @__PURE__ */ React2.createElement(ActionBar_default, {
    "data-parent": label,
    toggleRef,
    onBlur: handleBlur
  }, (typeof actionBar === "boolean" || actionBar.selectAll) && /* @__PURE__ */ React2.createElement(Button, {
    "data-parent": label,
    domain: "secondary",
    variant: "noFill",
    onClick: handleSelectAll
  }, typeof actionBar === "object" && actionBar.selectAll && typeof actionBar.selectAll === "string" ? actionBar.selectAll : "Select All"), /* @__PURE__ */ React2.createElement(Space_default, null), (typeof actionBar === "boolean" || actionBar.clearAll) && /* @__PURE__ */ React2.createElement(Button, {
    "data-parent": label,
    domain: "primary",
    variant: "noFill",
    onClick: handleClearAll
  }, typeof actionBar === "object" && actionBar.clearAll && typeof actionBar.clearAll === "string" ? actionBar.clearAll : "Clear All")));
};
var List_default = withEscapeWatcher_default(List);

// src/components/shared/utils/getMultiselectLabel.ts
var getMultiselectLabel_default = ({options, value, placeholder}) => {
  if (!value || value.length === 0) {
    return placeholder;
  }
  return value.reduce((acc, cur) => {
    const valueIsOption = options.find((option) => option.id === cur);
    if (!valueIsOption) {
      return acc === "" ? placeholder : acc;
    }
    const name = valueIsOption.label;
    if (acc !== "") {
      return `${acc}, ${name}`;
    }
    return `${name}`;
  }, ``);
};

// src/components/shared/utils/getSelectLabel.ts
var getSelectLabel_default = ({options, value, placeholder}) => {
  const valueIsOption = options.find((option) => option.id === value[0]);
  if (typeof value === "undefined" || !valueIsOption) {
    return placeholder;
  }
  return valueIsOption.label;
};

// src/components/shared/Dropdown/Dropdown.tsx
var Dropdown2 = React3.forwardRef((props, forwardedRef) => {
  const {className, ...otherProps} = props;
  if (props.invalid) {
    console.warn(`prop 'invalid' has been deprecated in favor of passing 'status'="error"`);
    console.warn(`To be removed in @wedgekit/select@8.0.0`);
  }
  const internalRef = useRef2(null);
  const focusRef = useRef2(null);
  const dropdownRefs = mergeRefs([forwardedRef, internalRef]);
  const uuidRef = useRef2(uuid());
  const [showPopover, setShowPopover] = useState2(false);
  const getValueCount = () => {
    if (typeof props.value === "undefined") {
      return 0;
    }
    const validValues = props.options.map((option) => option.id);
    const values = Array.isArray(props.value) ? props.value : [props.value];
    return values.filter((val) => validValues.includes(val)).length;
  };
  const dropdownProps = {};
  if (props.labelHidden) {
    dropdownProps["aria-label"] = props.label;
  }
  const isInternal = (event) => !!focusRef.current && event.relatedTarget instanceof Node && focusRef.current.contains(event.relatedTarget);
  const handleDropdownFocus = (event) => {
    if (props.onFocus && !isInternal(event)) {
      props.onFocus(event);
    }
  };
  const handleDropdownBlur = (event) => {
    if (props.onBlur && event.currentTarget === event.target && !isInternal(event)) {
      props.onBlur(event);
    }
  };
  const handleListBlur = (event) => {
    if (props.onBlur) {
      props.onBlur(event);
    }
    if (event.relatedTarget !== internalRef.current) {
      setShowPopover(false);
    }
  };
  return /* @__PURE__ */ React3.createElement(FieldStatusWrapper, {
    className,
    disabled: props.disabled,
    fullLength: true,
    readOnly: props.readOnly
  }, !props.labelHidden && /* @__PURE__ */ React3.createElement(Row, {
    center: true
  }, /* @__PURE__ */ React3.createElement(Label_default, {
    disabled: props.disabled,
    htmlFor: uuidRef.current,
    required: props.required
  }, props.label), props.info && /* @__PURE__ */ React3.createElement(InfoButton, {
    info: props.info,
    tabIndex: props.tabIndex
  })), /* @__PURE__ */ React3.createElement("div", {
    ref: focusRef
  }, /* @__PURE__ */ React3.createElement(DropdownWrapper_default, {
    ...dropdownProps,
    labelHidden: props.labelHidden,
    disabled: props.disabled,
    invalid: props.invalid,
    popoverOpen: showPopover,
    readOnly: props.readOnly,
    ref: dropdownRefs,
    role: "button",
    status: props.status,
    tabIndex: props.disabled || showPopover ? primitives4.tabIndex.disabled : props.tabIndex || 0,
    onBlur: handleDropdownBlur,
    onFocus: handleDropdownFocus,
    onClick: () => setShowPopover(!showPopover),
    onKeyPress: (e) => {
      if (!showPopover) {
        return handleKeyEvent({
          "Enter|\\s": () => {
            setShowPopover(true);
          }
        })(e);
      }
      return null;
    }
  }, /* @__PURE__ */ React3.createElement(DropdownText_default, {
    htmlFor: uuidRef.current,
    disabled: props.disabled,
    required: props.required,
    isPlaceholder: !props.value || !props.value.length
  }, props.multiple ? getMultiselectLabel_default({
    options: props.options,
    placeholder: props.placeholder || "Select option(s)",
    value: props.value
  }) : getSelectLabel_default({
    options: props.options,
    placeholder: props.placeholder || "Select one",
    value: props.value
  })), props.multiple && !!props.value.length && getValueCount() > 0 && /* @__PURE__ */ React3.createElement(Badge_default, null, getValueCount()), /* @__PURE__ */ React3.createElement(Caret_default, null, /* @__PURE__ */ React3.createElement(Chevron, {
    color: props.disabled ? "N400" : "N600",
    direction: showPopover && !props.disabled ? "up" : "down"
  }))), showPopover && !props.disabled && /* @__PURE__ */ React3.createElement(List_default, {
    ...otherProps,
    id: uuidRef.current,
    toggleRef: internalRef,
    onBlur: handleListBlur,
    onEscape: () => {
      setShowPopover(false);
    },
    onSelect: props.multiple ? () => {
    } : (e) => {
      var _a;
      (_a = internalRef.current) == null ? void 0 : _a.focus();
      setShowPopover(false);
      if (props.onFocus) {
        props.onFocus(e);
      }
    },
    "data-cy": "multiselect-list"
  })));
});
var Dropdown_default = Dropdown2;

// src/components/shared/Native/Native.tsx
import React4, {useRef as useRef3, useState as useState3} from "react";
import {v4 as uuid2} from "uuid";
import {Chevron as Chevron2} from "@wedgekit/icons";
import InfoButton2 from "@wedgekit/info-button";
import {FieldStatusWrapper as FieldStatusWrapper2, Row as Row2} from "@wedgekit/primitives";

// src/components/shared/Native/styled/Wrapper.tsx
import styled15 from "styled-components";
var MobileSelectWrapper = styled15.div`
  position: relative;
  z-index: 0;
`;
var Wrapper_default = MobileSelectWrapper;

// src/components/shared/Native/styled/NativeDropdown.tsx
import styled16 from "styled-components";
var NativeDropdown_default = styled16(DropdownWrapper_default)`
  position: absolute;
  z-index: -1;
  top: 0;
  left: 0;
`;

// src/components/shared/Native/styled/SelectRaw.tsx
import styled17 from "styled-components";
import {UpdatedInputMixin as UpdatedInputMixin2} from "@wedgekit/primitives";
var SelectRaw_default = styled17.select`
  ${UpdatedInputMixin2};
  appearance: none;
  color: transparent;
  background-color: transparent;
  box-shadow: none;
  width: 100%;
`;

// src/components/shared/Native/Native.tsx
var NativeSelect = React4.forwardRef((props, forwardedRef) => {
  const uuidRef = useRef3(uuid2());
  const [chevronDown, setChevronDown] = useState3(true);
  const dropdownProps = {};
  if (props.labelHidden) {
    dropdownProps["aria-label"] = props.label;
  }
  return /* @__PURE__ */ React4.createElement(FieldStatusWrapper2, {
    className: props.className,
    disabled: props.disabled,
    readOnly: props.readOnly
  }, !props.labelHidden && /* @__PURE__ */ React4.createElement(Row2, {
    center: true
  }, /* @__PURE__ */ React4.createElement(Label_default, {
    disabled: props.disabled,
    htmlFor: uuidRef.current,
    required: props.required
  }, props.label), props.info && /* @__PURE__ */ React4.createElement(InfoButton2, {
    info: props.info,
    tabIndex: props.tabIndex
  })), /* @__PURE__ */ React4.createElement(Wrapper_default, null, /* @__PURE__ */ React4.createElement(SelectRaw_default, {
    multiple: true,
    required: props.required,
    onBlur: (e) => {
      setChevronDown(true);
      if (props.onBlur) {
        props.onBlur(e);
      }
    },
    onChange: (e) => props.onChange([...e.target.selectedOptions].map((option) => option.value), e),
    onFocus: (e) => {
      setChevronDown(false);
      if (props.onFocus) {
        props.onFocus(e);
      }
    },
    ...dropdownProps
  }, props.options.map((option) => /* @__PURE__ */ React4.createElement("option", {
    value: option.id,
    selected: !!props.value.find((value) => value === option.id),
    disabled: option.disabled
  }, option.label))), /* @__PURE__ */ React4.createElement(NativeDropdown_default, {
    disabled: props.disabled,
    invalid: props.invalid,
    labelHidden: props.labelHidden,
    readOnly: props.readOnly,
    ref: forwardedRef,
    status: props.status
  }, /* @__PURE__ */ React4.createElement(DropdownText_default, {
    htmlFor: uuidRef.current,
    disabled: props.disabled,
    required: props.required
  }, props.multiple ? getMultiselectLabel_default({
    options: props.options,
    placeholder: props.placeholder || "Select option(s)",
    value: props.value
  }) : getSelectLabel_default({
    options: props.options,
    placeholder: props.placeholder || "Select one",
    value: props.value
  })), /* @__PURE__ */ React4.createElement(Caret_default, null, /* @__PURE__ */ React4.createElement(Chevron2, {
    color: props.disabled ? "N400" : "N600",
    direction: chevronDown ? "down" : "up"
  })))));
});
var Native_default = NativeSelect;

// src/components/Multiselect/Multiselect.tsx
var Multiselect = React5.forwardRef((props, ref) => /* @__PURE__ */ React5.createElement(React5.Fragment, null, browser.mobile ? /* @__PURE__ */ React5.createElement(Native_default, {
  ...props,
  multiple: true,
  ref
}) : /* @__PURE__ */ React5.createElement(Dropdown_default, {
  ...props,
  multiple: true,
  ref
})));
var Multiselect_default = Multiselect;

// src/components/Select/Select.tsx
import React6 from "react";
import {browser as browser2} from "@dmsi/core";
var Select = React6.forwardRef((props, ref) => {
  const options = props.delible ? [
    {
      id: typeof props.delible === "object" ? props.delible.id : "DELIBLE_OPTION_ID",
      label: typeof props.delible === "object" && props.delible.label || "---"
    },
    ...props.options
  ] : props.options;
  const value = [props.value];
  const onChange = (newValue, event) => {
    props.onChange(newValue[0] || "", event);
  };
  return /* @__PURE__ */ React6.createElement(React6.Fragment, null, browser2.mobile ? /* @__PURE__ */ React6.createElement(Native_default, {
    ...props,
    options,
    ref,
    value,
    onChange
  }) : /* @__PURE__ */ React6.createElement(Dropdown_default, {
    ...props,
    options,
    ref,
    value,
    onChange
  }));
});
var Select_default = Select;
export {
  Multiselect_default as Multiselect,
  Select_default as Select,
  ActionBar_default as StyledActionBar,
  Badge_default as StyledBadge,
  DropdownWrapper_default as StyledDropdown,
  DropdownText_default as StyledDropdownText,
  Filter_default as StyledFilter,
  Label_default as StyledLabel,
  OptionList_default as StyledOptionList
};
//# sourceMappingURL=data:application/json;base64,ewogICJ2ZXJzaW9uIjogMywKICAic291cmNlcyI6IFsiLi4vc3JjL2NvbXBvbmVudHMvTXVsdGlzZWxlY3QvTXVsdGlzZWxlY3QudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9Ecm9wZG93bi9Ecm9wZG93bi50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2hhcmVkL0Ryb3Bkb3duL3N0eWxlZC9CYWRnZS50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2hhcmVkL0Ryb3Bkb3duL3N0eWxlZC9DYXJldC50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2hhcmVkL0Ryb3Bkb3duL3N0eWxlZC9Ecm9wZG93bldyYXBwZXIudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9Ecm9wZG93bi9zdHlsZWQvRHJvcGRvd25UZXh0LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9Ecm9wZG93bi9zdHlsZWQvTGFiZWwudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9MaXN0L0xpc3QudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9MaXN0L3V0aWxzL2dldE5ld1ZhbHVlLnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9MaXN0L3V0aWxzL2dldE5ld0luZGV4LnRzIiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9MaXN0L3V0aWxzL3dpdGhFc2NhcGVXYXRjaGVyLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTGlzdC9zdHlsZWQvQWN0aW9uQmFyLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTGlzdC9zdHlsZWQvRmlsdGVyLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTGlzdC9zdHlsZWQvTXVsdGlzZWxlY3RPcHRpb24udHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9MaXN0L3N0eWxlZC9PcHRpb25MaXN0LnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTGlzdC9zdHlsZWQvT3B0aW9uVGV4dC50c3giLCAiLi4vc3JjL2NvbXBvbmVudHMvc2hhcmVkL0xpc3Qvc3R5bGVkL09wdGlvbnNXcmFwcGVyLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTGlzdC9zdHlsZWQvU2VsZWN0T3B0aW9uLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTGlzdC9zdHlsZWQvU3BhY2UudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9MaXN0L3N0eWxlZC9TdHlsZWRQb3BvdmVyLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvdXRpbHMvZ2V0TXVsdGlzZWxlY3RMYWJlbC50cyIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvdXRpbHMvZ2V0U2VsZWN0TGFiZWwudHMiLCAiLi4vc3JjL2NvbXBvbmVudHMvc2hhcmVkL05hdGl2ZS9OYXRpdmUudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9OYXRpdmUvc3R5bGVkL1dyYXBwZXIudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL3NoYXJlZC9OYXRpdmUvc3R5bGVkL05hdGl2ZURyb3Bkb3duLnRzeCIsICIuLi9zcmMvY29tcG9uZW50cy9zaGFyZWQvTmF0aXZlL3N0eWxlZC9TZWxlY3RSYXcudHN4IiwgIi4uL3NyYy9jb21wb25lbnRzL1NlbGVjdC9TZWxlY3QudHN4Il0sCiAgInNvdXJjZXNDb250ZW50IjogWyJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBicm93c2VyIH0gZnJvbSAnQGRtc2kvY29yZSc7XG5cbmltcG9ydCB7IERyb3Bkb3duLCBOYXRpdmUgfSBmcm9tICcuLi9zaGFyZWQnO1xuaW1wb3J0IHsgRHJvcGRvd25Qcm9wcyB9IGZyb20gJy4uL3R5cGVzJztcblxuY29uc3QgTXVsdGlzZWxlY3QgPSBSZWFjdC5mb3J3YXJkUmVmKChwcm9wczogRHJvcGRvd25Qcm9wcywgcmVmPzogUmVhY3QuUmVmPEhUTUxEaXZFbGVtZW50PikgPT4gKFxuICA8PlxuICAgIHticm93c2VyLm1vYmlsZSA/IChcbiAgICAgIDxOYXRpdmUgey4uLnByb3BzfSBtdWx0aXBsZSByZWY9e3JlZn0gLz5cbiAgICApIDogKFxuICAgICAgPERyb3Bkb3duIHsuLi5wcm9wc30gbXVsdGlwbGUgcmVmPXtyZWZ9IC8+XG4gICAgKX1cbiAgPC8+XG4pKTtcblxuZXhwb3J0IGRlZmF1bHQgTXVsdGlzZWxlY3Q7XG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZVJlZiwgdXNlU3RhdGUsIEtleWJvYXJkRXZlbnQgfSBmcm9tICdyZWFjdCc7XG5pbXBvcnQgbWVyZ2VSZWZzIGZyb20gJ3JlYWN0LW1lcmdlLXJlZnMnO1xuaW1wb3J0IHsgdjQgYXMgdXVpZCB9IGZyb20gJ3V1aWQnO1xuXG5pbXBvcnQgeyBPcHRpb25Qcm9wcyB9IGZyb20gJ0B3ZWRnZWtpdC9jaGVja2JveC1saXN0JztcblxuaW1wb3J0IHsgQ2hldnJvbiB9IGZyb20gJ0B3ZWRnZWtpdC9pY29ucyc7XG5pbXBvcnQgSW5mb0J1dHRvbiBmcm9tICdAd2VkZ2VraXQvaW5mby1idXR0b24nO1xuaW1wb3J0IHByaW1pdGl2ZXMsIHsgRmllbGRTdGF0dXNXcmFwcGVyLCBSb3cgfSBmcm9tICdAd2VkZ2VraXQvcHJpbWl0aXZlcyc7XG5pbXBvcnQgeyBoYW5kbGVLZXlFdmVudCB9IGZyb20gJ0B3ZWRnZWtpdC91dGlscyc7XG5cbmltcG9ydCB7IERyb3Bkb3duV3JhcHBlciwgRHJvcGRvd25UZXh0LCBDYXJldCwgTGFiZWwsIEJhZGdlIH0gZnJvbSAnLi9zdHlsZWQnO1xuaW1wb3J0IHsgTGlzdCB9IGZyb20gJy4uL0xpc3QnO1xuaW1wb3J0IHsgRHJvcGRvd25Qcm9wcyB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IGdldE11bHRpc2VsZWN0TGFiZWwsIGdldFNlbGVjdExhYmVsIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5jb25zdCBEcm9wZG93biA9IFJlYWN0LmZvcndhcmRSZWY8SFRNTERpdkVsZW1lbnQsIERyb3Bkb3duUHJvcHM+KChwcm9wcywgZm9yd2FyZGVkUmVmKSA9PiB7XG4gIGNvbnN0IHsgY2xhc3NOYW1lLCAuLi5vdGhlclByb3BzIH0gPSBwcm9wcztcblxuICBpZiAocHJvcHMuaW52YWxpZCkge1xuICAgIGNvbnNvbGUud2FybihgcHJvcCAnaW52YWxpZCcgaGFzIGJlZW4gZGVwcmVjYXRlZCBpbiBmYXZvciBvZiBwYXNzaW5nICdzdGF0dXMnPVwiZXJyb3JcImApO1xuICAgIGNvbnNvbGUud2FybihgVG8gYmUgcmVtb3ZlZCBpbiBAd2VkZ2VraXQvc2VsZWN0QDguMC4wYCk7XG4gIH1cblxuICBjb25zdCBpbnRlcm5hbFJlZiA9IHVzZVJlZjxIVE1MRGl2RWxlbWVudD4obnVsbCk7XG4gIGNvbnN0IGZvY3VzUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgZHJvcGRvd25SZWZzID0gbWVyZ2VSZWZzKFtmb3J3YXJkZWRSZWYsIGludGVybmFsUmVmXSk7XG4gIGNvbnN0IHV1aWRSZWYgPSB1c2VSZWYodXVpZCgpKTtcblxuICBjb25zdCBbc2hvd1BvcG92ZXIsIHNldFNob3dQb3BvdmVyXSA9IHVzZVN0YXRlKGZhbHNlKTtcblxuICBjb25zdCBnZXRWYWx1ZUNvdW50ID0gKCkgPT4ge1xuICAgIGlmICh0eXBlb2YgcHJvcHMudmFsdWUgPT09ICd1bmRlZmluZWQnKSB7XG4gICAgICByZXR1cm4gMDtcbiAgICB9XG5cbiAgICBjb25zdCB2YWxpZFZhbHVlcyA9IHByb3BzLm9wdGlvbnMubWFwKChvcHRpb246IE9wdGlvblByb3BzKSA9PiBvcHRpb24uaWQpO1xuICAgIGNvbnN0IHZhbHVlcyA9IEFycmF5LmlzQXJyYXkocHJvcHMudmFsdWUpID8gcHJvcHMudmFsdWUgOiBbcHJvcHMudmFsdWVdO1xuICAgIHJldHVybiB2YWx1ZXMuZmlsdGVyKCh2YWwpID0+IHZhbGlkVmFsdWVzLmluY2x1ZGVzKHZhbCkpLmxlbmd0aDtcbiAgfTtcblxuICBjb25zdCBkcm9wZG93blByb3BzOiB7XG4gICAgJ2FyaWEtbGFiZWwnPzogc3RyaW5nO1xuICAgICdkYXRhLWN5Jz86IHN0cmluZztcbiAgfSA9IHt9O1xuXG4gIGlmIChwcm9wcy5sYWJlbEhpZGRlbikge1xuICAgIGRyb3Bkb3duUHJvcHNbJ2FyaWEtbGFiZWwnXSA9IHByb3BzLmxhYmVsO1xuICB9XG5cbiAgY29uc3QgaXNJbnRlcm5hbCA9IChldmVudDogUmVhY3QuRm9jdXNFdmVudCkgPT5cbiAgICAhIWZvY3VzUmVmLmN1cnJlbnQgJiZcbiAgICBldmVudC5yZWxhdGVkVGFyZ2V0IGluc3RhbmNlb2YgTm9kZSAmJlxuICAgIGZvY3VzUmVmLmN1cnJlbnQuY29udGFpbnMoZXZlbnQucmVsYXRlZFRhcmdldCk7XG5cbiAgY29uc3QgaGFuZGxlRHJvcGRvd25Gb2N1cyA9IChldmVudDogUmVhY3QuRm9jdXNFdmVudCkgPT4ge1xuICAgIGlmIChwcm9wcy5vbkZvY3VzICYmICFpc0ludGVybmFsKGV2ZW50KSkge1xuICAgICAgLy8gT25seSB0cmlnZ2VyIG9uRm9jdXMgd2hlbiBmb2N1cyBjb21lcyBmcm9tIG91dHNpZGUgdGhlIERyb3Bkb3duIG9yIExpc3RcbiAgICAgIHByb3BzLm9uRm9jdXMoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVEcm9wZG93bkJsdXIgPSAoZXZlbnQ6IFJlYWN0LkZvY3VzRXZlbnQpID0+IHtcbiAgICBpZiAocHJvcHMub25CbHVyICYmIGV2ZW50LmN1cnJlbnRUYXJnZXQgPT09IGV2ZW50LnRhcmdldCAmJiAhaXNJbnRlcm5hbChldmVudCkpIHtcbiAgICAgIC8vIE9ubHkgdHJpZ2dlciBvbkJsdXIgd2hlbiB0aGUgZm9jdXMgbW92ZXMgZnJvbSB0aGUgRHJvcGRvd24gdG8gb3V0c2lkZSB0aGUgY29tcG9uZW50XG4gICAgICBwcm9wcy5vbkJsdXIoZXZlbnQpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBoYW5kbGVMaXN0Qmx1ciA9IChldmVudDogUmVhY3QuRm9jdXNFdmVudCkgPT4ge1xuICAgIC8vIE9ubHkgdHJpZ2dlciBvbkJsdXIgd2hlbiB0aGUgZm9jdXMgbW92ZXMgb3V0c2lkZSB0aGUgTGlzdFxuICAgIGlmIChwcm9wcy5vbkJsdXIpIHtcbiAgICAgIHByb3BzLm9uQmx1cihldmVudCk7XG4gICAgfVxuICAgIGlmIChldmVudC5yZWxhdGVkVGFyZ2V0ICE9PSBpbnRlcm5hbFJlZi5jdXJyZW50KSB7XG4gICAgICAvLyBMZXQgb25jQ2xpY2sgaGFuZGxlIGNsb3NpbmcgdGhlIHBvcG92ZXIgd2hlbiB0aGUgRHJvcGRvd24gaXMgY2xpY2tlZFxuICAgICAgc2V0U2hvd1BvcG92ZXIoZmFsc2UpO1xuICAgIH1cbiAgfTtcblxuICByZXR1cm4gKFxuICAgIC8vIFRPRE8gW0pVTi0xMTkzXSBNaWdyYXRlIHRoZXNlIHByb3BzIHRvIHRoZSBsYWJlbCBpbnNpZGUgb2YgTXVsdGlzZWxlY3QgYW5kIFJlbW92ZSBGaWVsZFN0YXR1c1dyYXBwZXJcbiAgICA8RmllbGRTdGF0dXNXcmFwcGVyXG4gICAgICBjbGFzc05hbWU9e2NsYXNzTmFtZX1cbiAgICAgIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH1cbiAgICAgIGZ1bGxMZW5ndGhcbiAgICAgIHJlYWRPbmx5PXtwcm9wcy5yZWFkT25seX1cbiAgICA+XG4gICAgICB7IXByb3BzLmxhYmVsSGlkZGVuICYmIChcbiAgICAgICAgPFJvdyBjZW50ZXI+XG4gICAgICAgICAgPExhYmVsIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH0gaHRtbEZvcj17dXVpZFJlZi5jdXJyZW50fSByZXF1aXJlZD17cHJvcHMucmVxdWlyZWR9PlxuICAgICAgICAgICAge3Byb3BzLmxhYmVsfVxuICAgICAgICAgIDwvTGFiZWw+XG4gICAgICAgICAge3Byb3BzLmluZm8gJiYgPEluZm9CdXR0b24gaW5mbz17cHJvcHMuaW5mb30gdGFiSW5kZXg9e3Byb3BzLnRhYkluZGV4fSAvPn1cbiAgICAgICAgPC9Sb3c+XG4gICAgICApfVxuICAgICAgPGRpdiByZWY9e2ZvY3VzUmVmfT5cbiAgICAgICAgPERyb3Bkb3duV3JhcHBlclxuICAgICAgICAgIHsuLi5kcm9wZG93blByb3BzfVxuICAgICAgICAgIGxhYmVsSGlkZGVuPXtwcm9wcy5sYWJlbEhpZGRlbn1cbiAgICAgICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgaW52YWxpZD17cHJvcHMuaW52YWxpZH1cbiAgICAgICAgICBwb3BvdmVyT3Blbj17c2hvd1BvcG92ZXJ9XG4gICAgICAgICAgcmVhZE9ubHk9e3Byb3BzLnJlYWRPbmx5fVxuICAgICAgICAgIHJlZj17ZHJvcGRvd25SZWZzfVxuICAgICAgICAgIHJvbGU9XCJidXR0b25cIlxuICAgICAgICAgIHN0YXR1cz17cHJvcHMuc3RhdHVzfVxuICAgICAgICAgIHRhYkluZGV4PXtcbiAgICAgICAgICAgIHByb3BzLmRpc2FibGVkIHx8IHNob3dQb3BvdmVyID8gcHJpbWl0aXZlcy50YWJJbmRleC5kaXNhYmxlZCA6IHByb3BzLnRhYkluZGV4IHx8IDBcbiAgICAgICAgICB9XG4gICAgICAgICAgb25CbHVyPXtoYW5kbGVEcm9wZG93bkJsdXJ9XG4gICAgICAgICAgb25Gb2N1cz17aGFuZGxlRHJvcGRvd25Gb2N1c31cbiAgICAgICAgICBvbkNsaWNrPXsoKSA9PiBzZXRTaG93UG9wb3Zlcighc2hvd1BvcG92ZXIpfVxuICAgICAgICAgIG9uS2V5UHJlc3M9eyhlOiBLZXlib2FyZEV2ZW50PEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgICAgICAgICAgaWYgKCFzaG93UG9wb3Zlcikge1xuICAgICAgICAgICAgICByZXR1cm4gaGFuZGxlS2V5RXZlbnQ8SFRNTERpdkVsZW1lbnQ+KHtcbiAgICAgICAgICAgICAgICAnRW50ZXJ8XFxcXHMnOiAoKSA9PiB7XG4gICAgICAgICAgICAgICAgICBzZXRTaG93UG9wb3Zlcih0cnVlKTtcbiAgICAgICAgICAgICAgICB9LFxuICAgICAgICAgICAgICB9KShlKTtcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIHJldHVybiBudWxsO1xuICAgICAgICAgIH19XG4gICAgICAgID5cbiAgICAgICAgICA8RHJvcGRvd25UZXh0XG4gICAgICAgICAgICBodG1sRm9yPXt1dWlkUmVmLmN1cnJlbnR9XG4gICAgICAgICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgICByZXF1aXJlZD17cHJvcHMucmVxdWlyZWR9XG4gICAgICAgICAgICBpc1BsYWNlaG9sZGVyPXshcHJvcHMudmFsdWUgfHwgIXByb3BzLnZhbHVlLmxlbmd0aH1cbiAgICAgICAgICA+XG4gICAgICAgICAgICB7cHJvcHMubXVsdGlwbGVcbiAgICAgICAgICAgICAgPyBnZXRNdWx0aXNlbGVjdExhYmVsKHtcbiAgICAgICAgICAgICAgICAgIG9wdGlvbnM6IHByb3BzLm9wdGlvbnMsXG4gICAgICAgICAgICAgICAgICBwbGFjZWhvbGRlcjogcHJvcHMucGxhY2Vob2xkZXIgfHwgJ1NlbGVjdCBvcHRpb24ocyknLFxuICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICAgICAgICAgIH0pXG4gICAgICAgICAgICAgIDogZ2V0U2VsZWN0TGFiZWwoe1xuICAgICAgICAgICAgICAgICAgb3B0aW9uczogcHJvcHMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgIHBsYWNlaG9sZGVyOiBwcm9wcy5wbGFjZWhvbGRlciB8fCAnU2VsZWN0IG9uZScsXG4gICAgICAgICAgICAgICAgICB2YWx1ZTogcHJvcHMudmFsdWUsXG4gICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgPC9Ecm9wZG93blRleHQ+XG4gICAgICAgICAge3Byb3BzLm11bHRpcGxlICYmICEhcHJvcHMudmFsdWUubGVuZ3RoICYmIGdldFZhbHVlQ291bnQoKSA+IDAgJiYgKFxuICAgICAgICAgICAgPEJhZGdlPntnZXRWYWx1ZUNvdW50KCl9PC9CYWRnZT5cbiAgICAgICAgICApfVxuICAgICAgICAgIDxDYXJldD5cbiAgICAgICAgICAgIDxDaGV2cm9uXG4gICAgICAgICAgICAgIGNvbG9yPXtwcm9wcy5kaXNhYmxlZCA/ICdONDAwJyA6ICdONjAwJ31cbiAgICAgICAgICAgICAgZGlyZWN0aW9uPXtzaG93UG9wb3ZlciAmJiAhcHJvcHMuZGlzYWJsZWQgPyAndXAnIDogJ2Rvd24nfVxuICAgICAgICAgICAgLz5cbiAgICAgICAgICA8L0NhcmV0PlxuICAgICAgICA8L0Ryb3Bkb3duV3JhcHBlcj5cbiAgICAgICAge3Nob3dQb3BvdmVyICYmICFwcm9wcy5kaXNhYmxlZCAmJiAoXG4gICAgICAgICAgPExpc3RcbiAgICAgICAgICAgIHsuLi5vdGhlclByb3BzfVxuICAgICAgICAgICAgaWQ9e3V1aWRSZWYuY3VycmVudH1cbiAgICAgICAgICAgIHRvZ2dsZVJlZj17aW50ZXJuYWxSZWZ9XG4gICAgICAgICAgICBvbkJsdXI9e2hhbmRsZUxpc3RCbHVyfVxuICAgICAgICAgICAgb25Fc2NhcGU9eygpID0+IHtcbiAgICAgICAgICAgICAgc2V0U2hvd1BvcG92ZXIoZmFsc2UpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uU2VsZWN0PXtcbiAgICAgICAgICAgICAgcHJvcHMubXVsdGlwbGVcbiAgICAgICAgICAgICAgICA/ICgpID0+IHt9XG4gICAgICAgICAgICAgICAgOiAoZTogUmVhY3QuRm9jdXNFdmVudCkgPT4ge1xuICAgICAgICAgICAgICAgICAgICAvLyBNYW51YWxseSB0cmlnZ2VyIGxpc3QgYmx1ciB0byB2YWxpZGF0ZSBhZnRlciBhIHNlbGVjdGlvblxuICAgICAgICAgICAgICAgICAgICBpbnRlcm5hbFJlZi5jdXJyZW50Py5mb2N1cygpO1xuICAgICAgICAgICAgICAgICAgICBzZXRTaG93UG9wb3ZlcihmYWxzZSk7XG4gICAgICAgICAgICAgICAgICAgIGlmIChwcm9wcy5vbkZvY3VzKSB7XG4gICAgICAgICAgICAgICAgICAgICAgLy8gUmVmb2N1cyB0byByZXN1bWUgYGFjdGl2ZWAgc3RhdHVzIGZvciBjb21wb25lbnRcbiAgICAgICAgICAgICAgICAgICAgICBwcm9wcy5vbkZvY3VzKGUpO1xuICAgICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9XG4gICAgICAgICAgICBkYXRhLWN5PVwibXVsdGlzZWxlY3QtbGlzdFwiXG4gICAgICAgICAgLz5cbiAgICAgICAgKX1cbiAgICAgIDwvZGl2PlxuICAgIDwvRmllbGRTdGF0dXNXcmFwcGVyPlxuICApO1xufSk7XG5cbmV4cG9ydCBkZWZhdWx0IERyb3Bkb3duO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgY29sb3IgZnJvbSAnQHdlZGdla2l0L2NvbG9yJztcbmltcG9ydCBwcmltaXRpdmVzLCB7IGdldEJhc2VQeCB9IGZyb20gJ0B3ZWRnZWtpdC9wcmltaXRpdmVzJztcblxuLy8gVE9ETzogW0pVTi00ODFdIEVpdGhlciBzdGFuZGFyZGl6ZSBsaW5lLWhlaWdodCBhcyAxLjUgKiBmb250LXNpemUgb3IgcmVtb3ZlIHRoaXMgY29tbW1lbnRcbmNvbnN0IEJhZGdlID0gc3R5bGVkLmRpdmBcbiAgZ3JpZC1jb2x1bW46IDIvMztcbiAgbWFyZ2luLXJpZ2h0OiAke2dldEJhc2VQeCgzKX07XG4gIGhlaWdodDogJHtnZXRCYXNlUHgoNil9O1xuICBib3JkZXItcmFkaXVzOiAke3ByaW1pdGl2ZXMuYmFzZSAqIDN9cHg7XG4gIHRleHQtYWxpZ246IGNlbnRlcjtcbiAgYmFja2dyb3VuZC1jb2xvcjogJHtjb2xvci5CMjAwfTtcbiAgY29sb3I6ICR7Y29sb3IuQjYwMH07XG4gIGZvbnQtZmFtaWx5OiAke3ByaW1pdGl2ZXMuZm9udEZhbWlseX07XG4gIGZvbnQtd2VpZ2h0OiAke3ByaW1pdGl2ZXMuZm9udFdlaWdodC5saW5rfTtcbiAgbGluZS1oZWlnaHQ6IDEuNXJlbTtcbiAgZm9udC1zaXplOiAke3ByaW1pdGl2ZXMuZm9udFNpemUuaW5wdXR9cHg7XG4gICR7KHsgY2hpbGRyZW4gfSkgPT4ge1xuICAgIGNvbnN0IGNoYXJDb3VudCA9IGNoaWxkcmVuPy50b1N0cmluZygpLmxlbmd0aCB8fCAwO1xuICAgIHJldHVybiBgd2lkdGg6ICR7cHJpbWl0aXZlcy5iYXNlICogKDQgKyAyICogY2hhckNvdW50KX1weDtgO1xuICB9fTtcbmA7XG5cbi8qIG1pbi13aWR0aDogJHtnZXRCYXNlUHgoNil9OyAqL1xuZXhwb3J0IGRlZmF1bHQgQmFkZ2U7XG4iLCAiaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCB7IGdldEJhc2VQeCB9IGZyb20gJ0B3ZWRnZWtpdC9wcmltaXRpdmVzJztcblxuY29uc3QgQ2FyZXQgPSBzdHlsZWQuZGl2YFxuICBncmlkLWNvbHVtbjogMy80O1xuICBoZWlnaHQ6ICR7Z2V0QmFzZVB4KDQpfTtcbiAgd2lkdGg6ICR7Z2V0QmFzZVB4KDQpfTtcbmA7XG5cbmV4cG9ydCBkZWZhdWx0IENhcmV0O1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgY29sb3IgZnJvbSAnQHdlZGdla2l0L2NvbG9yJztcbmltcG9ydCBwcmltaXRpdmVzLCB7IFVwZGF0ZWRJbnB1dE1peGluLCBnZXRCYXNlUHggfSBmcm9tICdAd2VkZ2VraXQvcHJpbWl0aXZlcyc7XG5cbmNvbnN0IERyb3Bkb3duID0gc3R5bGVkLmRpdjx7XG4gIGRpc2FibGVkPzogYm9vbGVhbjtcbiAgaW52YWxpZD86IGJvb2xlYW47XG4gIGxhYmVsSGlkZGVuPzogYm9vbGVhbjtcbiAgcG9wb3Zlck9wZW4/OiBib29sZWFuO1xuICByZWFkT25seT86IGJvb2xlYW47XG4gIHN0YXR1cz86ICdkZWZhdWx0JyB8ICdlcnJvcicgfCAnc3VjY2VzcycgfCAncGVuZGluZyc7XG59PmBcbiAgY3Vyc29yOiBwb2ludGVyO1xuICAke1VwZGF0ZWRJbnB1dE1peGlufVxuICBhbGlnbi1pdGVtczogY2VudGVyO1xuICBkaXNwbGF5OiBpbmxpbmUtZ3JpZDtcbiAgZ3JpZC10ZW1wbGF0ZS1jb2x1bW5zOiBtaW5tYXgoMCwgMWZyKSBtaW4tY29udGVudCBtaW4tY29udGVudDtcbiAgcGFkZGluZzogMCAke2dldEJhc2VQeCgzKX07XG4gIHdpZHRoOiAxMDAlO1xuICBib3JkZXI6ICR7KHsgZGlzYWJsZWQsIHBvcG92ZXJPcGVuIH0pID0+XG4gICAgIWRpc2FibGVkICYmIHBvcG92ZXJPcGVuICYmIGAke3ByaW1pdGl2ZXMuYm9yZGVyLndpZHRoLnN0YW5kYXJkfXB4IHNvbGlkICR7Y29sb3IuQjUwMH1gfTtcbiAgYm94LXNoYWRvdzogJHsoeyBkaXNhYmxlZCwgcG9wb3Zlck9wZW4gfSkgPT5cbiAgICAhZGlzYWJsZWQgJiYgcG9wb3Zlck9wZW4gJiYgYGluc2V0IDAgMCAwIC41cHggJHtjb2xvci5CNTAwfWB9O1xuICAmOmZvY3VzIHtcbiAgfVxuYDtcbmV4cG9ydCBkZWZhdWx0IERyb3Bkb3duO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgeyBUZXh0IH0gZnJvbSAnQHdlZGdla2l0L3ByaW1pdGl2ZXMnO1xuaW1wb3J0IGNvbG9ycyBmcm9tICdAd2VkZ2VraXQvY29sb3InO1xuXG50eXBlIFByb3BzID0ge1xuICBkaXNhYmxlZD86IGJvb2xlYW47XG4gIGh0bWxGb3I/OiBzdHJpbmc7XG4gIGlzUGxhY2Vob2xkZXI/OiBib29sZWFuO1xuICByZXF1aXJlZD86IGJvb2xlYW47XG59O1xuXG5jb25zdCBEcm9wZG93blRleHQgPSBzdHlsZWQoVGV4dCk8UHJvcHM+YFxuICBjb2xvcjogJHsoeyBkaXNhYmxlZCwgaXNQbGFjZWhvbGRlciB9KSA9PiAoZGlzYWJsZWQgfHwgaXNQbGFjZWhvbGRlcikgJiYgY29sb3JzLk40MDB9O1xuICBncmlkLWNvbHVtbjogMS8yO1xuICB0ZXh0LW92ZXJmbG93OiBlbGxpcHNpcztcbiAgb3ZlcmZsb3c6IGhpZGRlbjtcbiAgd2hpdGUtc3BhY2U6IG5vd3JhcDtcbmA7XG5cbmV4cG9ydCBkZWZhdWx0IERyb3Bkb3duVGV4dDtcbiIsICJpbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuaW1wb3J0IHsgTGFiZWwgYXMgQmFzZUxhYmVsIH0gZnJvbSAnQHdlZGdla2l0L3ByaW1pdGl2ZXMnO1xuXG4vKipcbiAqIFRoaXMgZXhpc3RzIGFzIGEgc2VwYXJhdGUgc3R5bGVkIGNvbXBvbmVudCBmcm9tIHRoZSBiYXNlIGxhYmVsIGZyb20gQHdlZGdla2l0L3ByaW1pdGl2ZXMgdG8gaXNvbGF0ZSBpdCBmb3JcbiAqIGV4dGVybmFsIHN0eWxpbmcuXG4gKi9cbmNvbnN0IExhYmVsID0gc3R5bGVkKEJhc2VMYWJlbClgYDtcblxuZXhwb3J0IGRlZmF1bHQgTGFiZWw7XG4iLCAiaW1wb3J0IFJlYWN0LCB7IHVzZUVmZmVjdCwgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcblxuaW1wb3J0IEJ1dHRvbiBmcm9tICdAd2VkZ2VraXQvYnV0dG9uJztcbmltcG9ydCB7IHVzZUNvbnRhaW5lckV2ZW50IH0gZnJvbSAnQHdlZGdla2l0L2hvb2tzJztcblxuaW1wb3J0IHsgZ2V0TmV3VmFsdWUsIGdldE5ld0luZGV4LCB3aXRoRXNjYXBlV2F0Y2hlciB9IGZyb20gJy4vdXRpbHMnO1xuaW1wb3J0IHtcbiAgQWN0aW9uQmFyLFxuICBGaWx0ZXIsXG4gIE11bHRpc2VsZWN0T3B0aW9uLFxuICBPcHRpb25MaXN0LFxuICBPcHRpb25UZXh0LFxuICBPcHRpb25zV3JhcHBlcixcbiAgU2VsZWN0T3B0aW9uLFxuICBTcGFjZSxcbiAgU3R5bGVkUG9wb3Zlcixcbn0gZnJvbSAnLi9zdHlsZWQnO1xuXG5pbXBvcnQgeyBMaXN0UHJvcHMsIE9wdGlvblByb3BzIH0gZnJvbSAnLi4vLi4vdHlwZXMnO1xuXG5jb25zdCBMaXN0ID0gKHByb3BzOiBMaXN0UHJvcHMpID0+IHtcbiAgY29uc3Qge1xuICAgIGFjdGlvbkJhcixcbiAgICBmaWx0ZXI6IGRpc3BsYXlGaWx0ZXIsXG4gICAgZmlsdGVyUGxhY2Vob2xkZXIsXG4gICAgbGFiZWwsXG4gICAgbXVsdGlwbGUsXG4gICAgb3B0aW9ucyxcbiAgICB0b2dnbGVSZWYsXG4gICAgdmFsdWUsXG4gICAgb25CbHVyLFxuICAgIG9uQ2hhbmdlLFxuICAgIG9uRXNjYXBlLFxuICAgIG9uU2VsZWN0LFxuICB9ID0gcHJvcHM7XG5cbiAgY29uc3QgYWN0aXZlT3B0aW9uUmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuICBjb25zdCBpbnRlcm5hbEZvY3VzUmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgY2hlY2tib3hMaXN0UmVmID0gdXNlUmVmPEhUTUxEaXZFbGVtZW50PihudWxsKTtcbiAgY29uc3QgZmlsdGVyUmVmID0gdXNlUmVmPEhUTUxJbnB1dEVsZW1lbnQ+KG51bGwpO1xuXG4gIGNvbnN0IFtmaWx0ZXIsIHNldEZpbHRlcl0gPSB1c2VTdGF0ZSgnJyk7XG5cbiAgY29uc3QgW2ZpbHRlcmVkT3B0aW9ucywgc2V0RmlsdGVyZWRPcHRpb25zXSA9IHVzZVN0YXRlKFxuICAgIG9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IG9wdGlvbi5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKGZpbHRlci50b0xvd2VyQ2FzZSgpKSksXG4gICk7XG5cbiAgY29uc3QgW2FjdGl2ZU9wdGlvbklkeCwgc2V0QWN0aXZlT3B0aW9uSWR4XSA9IHVzZVN0YXRlKFxuICAgICEhdmFsdWUgPT09ICEhW10gPyAwIDogZmlsdGVyZWRPcHRpb25zLmZpbmRJbmRleCgob3B0aW9uKSA9PiB2YWx1ZS5pbmNsdWRlcyhvcHRpb24uaWQpKSxcbiAgKTtcblxuICBjb25zdCBbYWxsU2VsZWN0ZWQsIHNldEFsbFNlbGVjdGVkXSA9IHVzZVN0YXRlKFxuICAgIHZhbHVlID09PSBmaWx0ZXJlZE9wdGlvbnMubWFwKChvcHRpb24pID0+IG9wdGlvbi5pZCksXG4gICk7XG5cbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBhY3RpdmVPcHRpb25SZWYuY3VycmVudD8uc2Nyb2xsSW50b1ZpZXcoeyBiZWhhdmlvcjogJ3Ntb290aCcsIGJsb2NrOiAnbmVhcmVzdCcgfSk7XG4gIH0sIFthY3RpdmVPcHRpb25JZHhdKTtcblxuICB1c2VFZmZlY3QoKCkgPT4ge1xuICAgIGlmIChkaXNwbGF5RmlsdGVyKSB7XG4gICAgICBmaWx0ZXJSZWYuY3VycmVudCEuZm9jdXMoKTtcbiAgICB9IGVsc2Uge1xuICAgICAgY2hlY2tib3hMaXN0UmVmLmN1cnJlbnQhLmZvY3VzKCk7XG4gICAgfVxuICB9LCBbXSk7XG5cbiAgdXNlQ29udGFpbmVyRXZlbnQoaW50ZXJuYWxGb2N1c1JlZiwge1xuICAgIHNjcm9sbDogKGU6IEV2ZW50LCBpbnNpZGU6IGJvb2xlYW4pID0+IHtcbiAgICAgIGlmICghaW5zaWRlICYmIG9uRXNjYXBlKSB7XG4gICAgICAgIG9uRXNjYXBlKGUpO1xuICAgICAgfVxuICAgIH0sXG4gIH0pO1xuXG4gIGNvbnN0IGhhbmRsZUZpbHRlckNoYW5nZSA9IChuZXdGaWx0ZXI6IHN0cmluZykgPT4ge1xuICAgIHNldEZpbHRlcihuZXdGaWx0ZXIpO1xuICAgIHNldEZpbHRlcmVkT3B0aW9ucyhcbiAgICAgIG9wdGlvbnMuZmlsdGVyKChvcHRpb24pID0+IG9wdGlvbi5sYWJlbC50b0xvd2VyQ2FzZSgpLmluY2x1ZGVzKG5ld0ZpbHRlci50b0xvd2VyQ2FzZSgpKSksXG4gICAgKTtcbiAgfTtcblxuICBjb25zdCBoYW5kbGVDbGljayA9IChldmVudDogUmVhY3QuTW91c2VFdmVudDxIVE1MSW5wdXRFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IG9wdGlvbiA9IGV2ZW50LnRhcmdldCBhcyBIVE1MSW5wdXRFbGVtZW50O1xuXG4gICAgY29uc3QgY3VycmVudElkeCA9IHBhcnNlSW50KG9wdGlvbi5nZXRBdHRyaWJ1dGUoJ2RhdGEtaWR4JykhLCAxMCk7XG5cbiAgICBjb25zdCBuZXdWYWx1ZSA9IGdldE5ld1ZhbHVlKHtcbiAgICAgIG11bHRpcGxlLFxuICAgICAgb3B0aW9ucyxcbiAgICAgIGZpbHRlcmVkT3B0aW9ucyxcbiAgICAgIGN1cnJlbnRJZHgsXG4gICAgICBwcmV2aW91c0lkeDogYWN0aXZlT3B0aW9uSWR4LFxuICAgICAgc2hpZnREb3duOiBldmVudC5zaGlmdEtleSxcbiAgICAgIHZhbHVlLFxuICAgIH0pO1xuXG4gICAgb25DaGFuZ2UobmV3VmFsdWUsIGV2ZW50KTtcbiAgICBpZiAob25TZWxlY3QpIHtcbiAgICAgIG9uU2VsZWN0KChldmVudCBhcyB1bmtub3duKSBhcyBSZWFjdC5Gb2N1c0V2ZW50KTtcbiAgICB9XG4gICAgc2V0QWN0aXZlT3B0aW9uSWR4KGN1cnJlbnRJZHgpO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUtleURvd24gPSAoZXZlbnQ6IFJlYWN0LktleWJvYXJkRXZlbnQpID0+IHtcbiAgICBzd2l0Y2ggKGV2ZW50LmtleSkge1xuICAgICAgY2FzZSAnQXJyb3dEb3duJzpcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgc2V0QWN0aXZlT3B0aW9uSWR4KGdldE5ld0luZGV4KGFjdGl2ZU9wdGlvbklkeCwgMSwgZmlsdGVyZWRPcHRpb25zLmxlbmd0aCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0Fycm93VXAnOlxuICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgICAgICBzZXRBY3RpdmVPcHRpb25JZHgoZ2V0TmV3SW5kZXgoYWN0aXZlT3B0aW9uSWR4LCAtMSwgZmlsdGVyZWRPcHRpb25zLmxlbmd0aCkpO1xuICAgICAgICBicmVhaztcbiAgICAgIGNhc2UgJ0VuZCc6XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldEFjdGl2ZU9wdGlvbklkeChmaWx0ZXJlZE9wdGlvbnMubGVuZ3RoIC0gMSk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgY2FzZSAnSG9tZSc6XG4gICAgICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICAgIHNldEFjdGl2ZU9wdGlvbklkeCgwKTtcbiAgICAgICAgYnJlYWs7XG4gICAgICBjYXNlICcgJzpcbiAgICAgIGNhc2UgJ1NwYWNlQmFyJzpcbiAgICAgICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAgICAgYWN0aXZlT3B0aW9uUmVmLmN1cnJlbnQhLmNsaWNrKCk7XG4gICAgICAgIGJyZWFrO1xuICAgICAgZGVmYXVsdDpcbiAgICB9XG4gIH07XG5cbiAgY29uc3QgaGFuZGxlQ2xlYXJBbGwgPSAoZXZlbnQ6IFJlYWN0Lk1vdXNlRXZlbnQ8SFRNTEJ1dHRvbkVsZW1lbnQ+KSA9PiB7XG4gICAgc2V0QWxsU2VsZWN0ZWQoZmFsc2UpO1xuICAgIG9uQ2hhbmdlKFtdLCAoZXZlbnQgYXMgdW5rbm93bikgYXMgUmVhY3QuTW91c2VFdmVudDxIVE1MRGl2RWxlbWVudD4pO1xuICB9O1xuXG4gIGNvbnN0IGhhbmRsZVNlbGVjdEFsbCA9IChldmVudDogUmVhY3QuTW91c2VFdmVudDxIVE1MQnV0dG9uRWxlbWVudD4pID0+IHtcbiAgICBpZiAoYWxsU2VsZWN0ZWQpIHtcbiAgICAgIGhhbmRsZUNsZWFyQWxsKGV2ZW50KTtcbiAgICB9IGVsc2Uge1xuICAgICAgY29uc3QgYWxsVmFsdWVzID0gZmlsdGVyZWRPcHRpb25zLnJlZHVjZTxzdHJpbmdbXT4oKGFjYywgY3VyOiBPcHRpb25Qcm9wcykgPT4ge1xuICAgICAgICBhY2MucHVzaChjdXIuaWQpO1xuICAgICAgICByZXR1cm4gYWNjO1xuICAgICAgfSwgW10pO1xuICAgICAgc2V0QWxsU2VsZWN0ZWQodHJ1ZSk7XG4gICAgICBvbkNoYW5nZShhbGxWYWx1ZXMsIChldmVudCBhcyB1bmtub3duKSBhcyBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50Pik7XG4gICAgfVxuICB9O1xuXG4gIGNvbnN0IGhhbmRsZUJsdXIgPSAoZXZlbnQ6IFJlYWN0LkZvY3VzRXZlbnQpID0+IHtcbiAgICAvLyBPbmx5IHRyaWdnZXIgb25CbHVyIHdoZW4gdGhlIGZvY3VzIG1vdmVzIG91dHNpZGUgdGhlIExpc3RcbiAgICBjb25zdCBpbnRlcm5hbEZvY3VzID1cbiAgICAgICEhaW50ZXJuYWxGb2N1c1JlZi5jdXJyZW50ICYmXG4gICAgICBldmVudC5yZWxhdGVkVGFyZ2V0IGluc3RhbmNlb2YgTm9kZSAmJlxuICAgICAgaW50ZXJuYWxGb2N1c1JlZi5jdXJyZW50LmNvbnRhaW5zKGV2ZW50LnJlbGF0ZWRUYXJnZXQpO1xuICAgIGlmICghaW50ZXJuYWxGb2N1cyAmJiBvbkJsdXIpIHtcbiAgICAgIG9uQmx1cihldmVudCk7XG4gICAgfVxuICB9O1xuXG4gIHJldHVybiAoXG4gICAgPFN0eWxlZFBvcG92ZXJcbiAgICAgIG5vZGU9e3RvZ2dsZVJlZi5jdXJyZW50IX1cbiAgICAgIHJlZj17aW50ZXJuYWxGb2N1c1JlZn1cbiAgICAgIG9uRXhpdD17b25Fc2NhcGV9XG4gICAgICBlbmFibGVkPXtmYWxzZX1cbiAgICA+XG4gICAgICA8T3B0aW9uc1dyYXBwZXIgZGF0YS1wYXJlbnQ9e2xhYmVsfSB0b2dnbGVSZWY9e3RvZ2dsZVJlZn0gdGFiSW5kZXg9ey0xfSBvbkJsdXI9e2hhbmRsZUJsdXJ9PlxuICAgICAgICB7ZGlzcGxheUZpbHRlciAmJiAoXG4gICAgICAgICAgPEZpbHRlclxuICAgICAgICAgICAgZGF0YS1wYXJlbnQ9e2xhYmVsfVxuICAgICAgICAgICAgZnVsbFdpZHRoXG4gICAgICAgICAgICBsYWJlbD17YEZpbHRlciAke2xhYmVsfSBzZWxlY3RgfVxuICAgICAgICAgICAgbGFiZWxIaWRkZW5cbiAgICAgICAgICAgIHBsYWNlaG9sZGVyPXtmaWx0ZXJQbGFjZWhvbGRlciB8fCAnU2VhcmNoJ31cbiAgICAgICAgICAgIHJlZj17ZmlsdGVyUmVmfVxuICAgICAgICAgICAgdmFsdWU9e2ZpbHRlcn1cbiAgICAgICAgICAgIG9uQ2hhbmdlPXsobmV3RmlsdGVyKSA9PiB7XG4gICAgICAgICAgICAgIGhhbmRsZUZpbHRlckNoYW5nZShuZXdGaWx0ZXIpO1xuICAgICAgICAgICAgfX1cbiAgICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cbiAgICAgICAgICAgIHN0YXR1cz1cImRlZmF1bHRcIlxuICAgICAgICAgIC8+XG4gICAgICAgICl9XG4gICAgICAgIDxPcHRpb25MaXN0XG4gICAgICAgICAgYXJpYS1sYWJlbD17bGFiZWx9XG4gICAgICAgICAgZGF0YS1wYXJlbnQ9e2xhYmVsfVxuICAgICAgICAgIGlkPXtgJHtsYWJlbH0tbGlzdGJveGB9XG4gICAgICAgICAgcm9sZT1cImxpc3Rib3hcIlxuICAgICAgICAgIHJlZj17Y2hlY2tib3hMaXN0UmVmfVxuICAgICAgICAgIHRhYkluZGV4PXtkaXNwbGF5RmlsdGVyID8gLTEgOiAwfVxuICAgICAgICAgIG9uS2V5RG93bj17aGFuZGxlS2V5RG93bn1cbiAgICAgICAgPlxuICAgICAgICAgIHtmaWx0ZXJlZE9wdGlvbnMubWFwKChvcHRpb24sIGlkeCkgPT5cbiAgICAgICAgICAgIG11bHRpcGxlID8gKFxuICAgICAgICAgICAgICA8TXVsdGlzZWxlY3RPcHRpb25cbiAgICAgICAgICAgICAgICBhY3RpdmU9e2FjdGl2ZU9wdGlvbklkeCA9PT0gaWR4fVxuICAgICAgICAgICAgICAgIGRhdGEtaWR4PXtpZHh9XG4gICAgICAgICAgICAgICAgZGF0YS1wYXJlbnQ9e2xhYmVsfVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtvcHRpb24uZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgaWQ9e2Ake2xhYmVsfS0ke29wdGlvbi5pZH1gfVxuICAgICAgICAgICAgICAgIGtleT17YG9wdGlvbi0ke29wdGlvbi5pZH1gfVxuICAgICAgICAgICAgICAgIGxhYmVsPXtvcHRpb24ubGFiZWx9XG4gICAgICAgICAgICAgICAgbmFtZT17b3B0aW9uLmlkfVxuICAgICAgICAgICAgICAgIHJlZj17aWR4ID09PSBhY3RpdmVPcHRpb25JZHggPyBhY3RpdmVPcHRpb25SZWYgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg9ey0xfVxuICAgICAgICAgICAgICAgIHZhbHVlPXttdWx0aXBsZSA/IHZhbHVlLmluY2x1ZGVzKG9wdGlvbi5pZCkgOiB2YWx1ZVswXSA9PT0gb3B0aW9uLmlkfVxuICAgICAgICAgICAgICAgIG9uQ2hhbmdlPXsoKSA9PiB7fX1cbiAgICAgICAgICAgICAgICBvbkNsaWNrPXtoYW5kbGVDbGlja31cbiAgICAgICAgICAgICAgLz5cbiAgICAgICAgICAgICkgOiAoXG4gICAgICAgICAgICAgIDxTZWxlY3RPcHRpb25cbiAgICAgICAgICAgICAgICBhY3RpdmU9e2FjdGl2ZU9wdGlvbklkeCA9PT0gaWR4fVxuICAgICAgICAgICAgICAgIGFyaWEtbGFiZWw9e29wdGlvbi5sYWJlbH1cbiAgICAgICAgICAgICAgICBhcmlhLXNlbGVjdGVkPXt2YWx1ZVswXSA9PT0gb3B0aW9uLmlkfVxuICAgICAgICAgICAgICAgIGRhdGEtcGFyZW50PXtsYWJlbH1cbiAgICAgICAgICAgICAgICBkYXRhLWlkeD17aWR4fVxuICAgICAgICAgICAgICAgIGRpc2FibGVkPXtvcHRpb24uZGlzYWJsZWR9XG4gICAgICAgICAgICAgICAgaWQ9e2Ake29wdGlvbi5pZH1gfVxuICAgICAgICAgICAgICAgIGtleT17YG9wdGlvbi0ke29wdGlvbi5pZH1gfVxuICAgICAgICAgICAgICAgIHJlZj17aWR4ID09PSBhY3RpdmVPcHRpb25JZHggPyBhY3RpdmVPcHRpb25SZWYgOiB1bmRlZmluZWR9XG4gICAgICAgICAgICAgICAgcm9sZT1cIm9wdGlvblwiXG4gICAgICAgICAgICAgICAgdGFiSW5kZXg9ey0xfVxuICAgICAgICAgICAgICAgIHZhbHVlPXt2YWx1ZVswXSA9PT0gb3B0aW9uLmlkfVxuICAgICAgICAgICAgICAgIG9uQ2xpY2s9e2hhbmRsZUNsaWNrfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAgPE9wdGlvblRleHQgZGF0YS1wYXJlbnQ9e2xhYmVsfSB0YWJJbmRleD17LTF9PlxuICAgICAgICAgICAgICAgICAge29wdGlvbi5sYWJlbH1cbiAgICAgICAgICAgICAgICA8L09wdGlvblRleHQ+XG4gICAgICAgICAgICAgIDwvU2VsZWN0T3B0aW9uPlxuICAgICAgICAgICAgKSxcbiAgICAgICAgICApfVxuICAgICAgICA8L09wdGlvbkxpc3Q+XG4gICAgICA8L09wdGlvbnNXcmFwcGVyPlxuICAgICAge211bHRpcGxlICYmICEhYWN0aW9uQmFyICYmIChcbiAgICAgICAgPEFjdGlvbkJhciBkYXRhLXBhcmVudD17bGFiZWx9IHRvZ2dsZVJlZj17dG9nZ2xlUmVmfSBvbkJsdXI9e2hhbmRsZUJsdXJ9PlxuICAgICAgICAgIHsodHlwZW9mIGFjdGlvbkJhciA9PT0gJ2Jvb2xlYW4nIHx8IGFjdGlvbkJhci5zZWxlY3RBbGwpICYmIChcbiAgICAgICAgICAgIDxCdXR0b25cbiAgICAgICAgICAgICAgZGF0YS1wYXJlbnQ9e2xhYmVsfVxuICAgICAgICAgICAgICBkb21haW49XCJzZWNvbmRhcnlcIlxuICAgICAgICAgICAgICB2YXJpYW50PVwibm9GaWxsXCJcbiAgICAgICAgICAgICAgb25DbGljaz17aGFuZGxlU2VsZWN0QWxsfVxuICAgICAgICAgICAgPlxuICAgICAgICAgICAgICB7dHlwZW9mIGFjdGlvbkJhciA9PT0gJ29iamVjdCcgJiZcbiAgICAgICAgICAgICAgYWN0aW9uQmFyLnNlbGVjdEFsbCAmJlxuICAgICAgICAgICAgICB0eXBlb2YgYWN0aW9uQmFyLnNlbGVjdEFsbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGFjdGlvbkJhci5zZWxlY3RBbGxcbiAgICAgICAgICAgICAgICA6ICdTZWxlY3QgQWxsJ31cbiAgICAgICAgICAgIDwvQnV0dG9uPlxuICAgICAgICAgICl9XG4gICAgICAgICAgPFNwYWNlIC8+XG4gICAgICAgICAgeyh0eXBlb2YgYWN0aW9uQmFyID09PSAnYm9vbGVhbicgfHwgYWN0aW9uQmFyLmNsZWFyQWxsKSAmJiAoXG4gICAgICAgICAgICA8QnV0dG9uIGRhdGEtcGFyZW50PXtsYWJlbH0gZG9tYWluPVwicHJpbWFyeVwiIHZhcmlhbnQ9XCJub0ZpbGxcIiBvbkNsaWNrPXtoYW5kbGVDbGVhckFsbH0+XG4gICAgICAgICAgICAgIHt0eXBlb2YgYWN0aW9uQmFyID09PSAnb2JqZWN0JyAmJlxuICAgICAgICAgICAgICBhY3Rpb25CYXIuY2xlYXJBbGwgJiZcbiAgICAgICAgICAgICAgdHlwZW9mIGFjdGlvbkJhci5jbGVhckFsbCA9PT0gJ3N0cmluZydcbiAgICAgICAgICAgICAgICA/IGFjdGlvbkJhci5jbGVhckFsbFxuICAgICAgICAgICAgICAgIDogJ0NsZWFyIEFsbCd9XG4gICAgICAgICAgICA8L0J1dHRvbj5cbiAgICAgICAgICApfVxuICAgICAgICA8L0FjdGlvbkJhcj5cbiAgICAgICl9XG4gICAgPC9TdHlsZWRQb3BvdmVyPlxuICApO1xufTtcblxuZXhwb3J0IGRlZmF1bHQgd2l0aEVzY2FwZVdhdGNoZXIoTGlzdCk7XG4iLCAiaW1wb3J0IHsgT3B0aW9uUHJvcHMgfSBmcm9tICcuLi8uLi8uLi90eXBlcyc7XG5cbnR5cGUgTmV3VmFsdWVUeXBlID0ge1xuICBtdWx0aXBsZT86IGJvb2xlYW47XG4gIG9wdGlvbnM6IE9wdGlvblByb3BzW107XG4gIGZpbHRlcmVkT3B0aW9ucz86IE9wdGlvblByb3BzW107XG4gIGN1cnJlbnRJZHg6IG51bWJlcjtcbiAgcHJldmlvdXNJZHg6IG51bWJlcjtcbiAgc2hpZnREb3duOiBib29sZWFuO1xuICB2YWx1ZTogc3RyaW5nW107XG59O1xuXG5jb25zdCBnZXROZXdWYWx1ZSA9ICh7XG4gIG11bHRpcGxlID0gZmFsc2UsXG4gIG9wdGlvbnMsXG4gIGZpbHRlcmVkT3B0aW9ucyA9IG9wdGlvbnMsXG4gIGN1cnJlbnRJZHgsXG4gIHByZXZpb3VzSWR4LFxuICBzaGlmdERvd24sXG4gIHZhbHVlLFxufTogTmV3VmFsdWVUeXBlKSA9PiB7XG4gIGlmICghbXVsdGlwbGUpIHtcbiAgICByZXR1cm4gW2ZpbHRlcmVkT3B0aW9uc1tjdXJyZW50SWR4XS5pZF07XG4gIH1cblxuICBjb25zdCBbc3RhcnRDaGFuZ2VJZHgsIGVuZENoYW5nZUlkeF0gPSBbY3VycmVudElkeCwgcHJldmlvdXNJZHhdLnNvcnQoKTtcblxuICByZXR1cm4gb3B0aW9ucy5yZWR1Y2UoKG5ld1ZhbHVlLCBvcHRpb24pID0+IHtcbiAgICBjb25zdCBjdXJyZW50bHlTZWxlY3RlZCA9IHZhbHVlLmluY2x1ZGVzKG9wdGlvbi5pZCk7XG4gICAgY29uc3Qgb3B0aW9uSWR4ID0gZmlsdGVyZWRPcHRpb25zLmZpbmRJbmRleChcbiAgICAgIChmaWx0ZXJlZE9wdGlvbikgPT4gZmlsdGVyZWRPcHRpb24uaWQgPT09IG9wdGlvbi5pZCxcbiAgICApO1xuXG4gICAgaWYgKHR5cGVvZiBvcHRpb25JZHggIT09ICdudW1iZXInKSB7XG4gICAgICBpZiAoY3VycmVudGx5U2VsZWN0ZWQpIHtcbiAgICAgICAgcmV0dXJuIG5ld1ZhbHVlLmNvbmNhdChvcHRpb24uaWQpO1xuICAgICAgfVxuICAgICAgcmV0dXJuIG5ld1ZhbHVlO1xuICAgIH1cblxuICAgIGlmIChzaGlmdERvd24pIHtcbiAgICAgIGNvbnN0IGFkZE9wdGlvbiA9IHN0YXJ0Q2hhbmdlSWR4IDw9IG9wdGlvbklkeCAmJiBvcHRpb25JZHggPD0gZW5kQ2hhbmdlSWR4O1xuICAgICAgaWYgKGN1cnJlbnRseVNlbGVjdGVkIHx8IGFkZE9wdGlvbikge1xuICAgICAgICByZXR1cm4gbmV3VmFsdWUuY29uY2F0KG9wdGlvbi5pZCk7XG4gICAgICB9XG4gICAgfVxuXG4gICAgY29uc3QgdG9nZ2xlT3B0aW9uID0gY3VycmVudElkeCA9PT0gb3B0aW9uSWR4O1xuICAgIGNvbnN0IGFkZE9wdGlvbiA9IGN1cnJlbnRseVNlbGVjdGVkIHx8IHRvZ2dsZU9wdGlvbjtcbiAgICBjb25zdCByZW1vdmVPcHRpb24gPSBjdXJyZW50bHlTZWxlY3RlZCAmJiB0b2dnbGVPcHRpb247XG5cbiAgICBpZiAoYWRkT3B0aW9uICYmICFyZW1vdmVPcHRpb24pIHtcbiAgICAgIHJldHVybiBuZXdWYWx1ZS5jb25jYXQob3B0aW9uLmlkKTtcbiAgICB9XG4gICAgcmV0dXJuIG5ld1ZhbHVlO1xuICB9LCBbXSBhcyBzdHJpbmdbXSk7XG59O1xuZXhwb3J0IGRlZmF1bHQgZ2V0TmV3VmFsdWU7XG4iLCAiZXhwb3J0IGRlZmF1bHQgKHN0YXJ0SWR4OiBudW1iZXIsIG1vdmU6IG51bWJlciwgbGlzdExlbmd0aDogbnVtYmVyKSA9PiB7XG4gIGNvbnN0IGEgPSBzdGFydElkeCArIG1vdmU7XG4gIGNvbnN0IG4gPSBsaXN0TGVuZ3RoO1xuICByZXR1cm4gKChhICUgbikgKyBuKSAlIG47XG59O1xuIiwgImltcG9ydCBSZWFjdCwgeyB1c2VFZmZlY3QgfSBmcm9tICdyZWFjdCc7XG5cbnR5cGUgUHJvcHMgPSB7XG4gIHRvZ2dsZVJlZj86IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD47XG4gIG9uRXNjYXBlPzogKGU/OiBLZXlib2FyZEV2ZW50IHwgTW91c2VFdmVudCkgPT4gdm9pZDtcbn07XG5cbmNvbnN0IHdpdGhFc2NhcGVXYXRjaGVyID0gPFAgZXh0ZW5kcyBQcm9wcz4oQ29tcG9uZW50OiBSZWFjdC5Db21wb25lbnRUeXBlPFA+KSA9PiAocHJvcHM6IFApID0+IHtcbiAgdXNlRWZmZWN0KCgpID0+IHtcbiAgICBjb25zdCBoYW5kbGVLZXlEb3duID0gKGU6IEtleWJvYXJkRXZlbnQpID0+IHtcbiAgICAgIGlmIChlLmtleSA9PT0gJ0VzY2FwZScpIHtcbiAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcbiAgICAgICAgaWYgKHByb3BzLm9uRXNjYXBlKSB7XG4gICAgICAgICAgcHJvcHMub25Fc2NhcGUoZSk7XG4gICAgICAgIH1cbiAgICAgICAgaWYgKHByb3BzLnRvZ2dsZVJlZiAmJiBwcm9wcy50b2dnbGVSZWYuY3VycmVudCkge1xuICAgICAgICAgIHByb3BzLnRvZ2dsZVJlZi5jdXJyZW50LmZvY3VzKCk7XG4gICAgICAgIH1cbiAgICAgIH1cbiAgICB9O1xuXG4gICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ2tleWRvd24nLCBoYW5kbGVLZXlEb3duLCB0cnVlKTtcblxuICAgIHJldHVybiAoKSA9PiB3aW5kb3cucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIGhhbmRsZUtleURvd24sIHRydWUpO1xuICB9LCBbXSk7XG5cbiAgcmV0dXJuIDxDb21wb25lbnQgey4uLnByb3BzfSAvPjtcbn07XG5cbmV4cG9ydCBkZWZhdWx0IHdpdGhFc2NhcGVXYXRjaGVyO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgeyBnZXRCYXNlUHggfSBmcm9tICdAd2VkZ2VraXQvcHJpbWl0aXZlcyc7XG5cbmNvbnN0IEFjdGlvbkJhciA9IHN0eWxlZC5kaXY8eyB0b2dnbGVSZWY6IFJlYWN0LlJlZk9iamVjdDxIVE1MRGl2RWxlbWVudD4gfT5gXG4gIHBvc2l0aW9uOiByZWxhdGl2ZTtcbiAgZGlzcGxheTogZmxleDtcbiAganVzdGlmeS1jb250ZW50OiBjZW50ZXI7XG4gIGJ1dHRvbiB7XG4gICAgbWFyZ2luOiAke2dldEJhc2VQeCgyKX07XG4gIH1cbiAgYm94LXNoYWRvdzogMCAtMnB4IDRweCAwIHJnYmEoMCwgMCwgMCwgMC4xKTtcbmA7XG5cbmV4cG9ydCBkZWZhdWx0IEFjdGlvbkJhcjtcbiIsICJpbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuaW1wb3J0IElucHV0IGZyb20gJ0B3ZWRnZWtpdC9pbnB1dCc7XG5pbXBvcnQgeyBnZXRCYXNlUHggfSBmcm9tICdAd2VkZ2VraXQvcHJpbWl0aXZlcyc7XG5cbmNvbnN0IEZpbHRlciA9IHN0eWxlZChJbnB1dClgXG4gIG1hcmdpbi10b3A6IDBweDtcbiAgbWFyZ2luLWJvdHRvbTogJHtnZXRCYXNlUHgoMyl9O1xuYDtcblxuZXhwb3J0IGRlZmF1bHQgRmlsdGVyO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgQ2hlY2tib3gsIHsgU3R5bGVkTGFiZWwgfSBmcm9tICdAd2VkZ2VraXQvY2hlY2tib3gnO1xuaW1wb3J0IGNvbG9yIGZyb20gJ0B3ZWRnZWtpdC9jb2xvcic7XG5cbmNvbnN0IGdldEJhY2tncm91bmRDb2xvciA9IChhY3RpdmU6IGJvb2xlYW4sIHZhbHVlOiBib29sZWFuKSA9PiB7XG4gIGlmICh2YWx1ZSkge1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHJldHVybiBjb2xvci5CMTAwO1xuICAgIH1cbiAgICByZXR1cm4gY29sb3IuQjIwMDtcbiAgfVxuICBpZiAoYWN0aXZlKSB7XG4gICAgcmV0dXJuIGNvbG9yLk4xMDA7XG4gIH1cbiAgcmV0dXJuIGNvbG9yLk4wNTA7XG59O1xuXG5jb25zdCBNdWx0aXNlbGVjdE9wdGlvbiA9IHN0eWxlZChDaGVja2JveCk8eyBhY3RpdmU6IGJvb2xlYW47IHZhbHVlOiBib29sZWFuIH0+YFxuICBib3gtc2l6aW5nOiBib3JkZXItYm94O1xuICBtYXJnaW4tYm90dG9tOiA0cHg7XG4gIHBhZGRpbmc6IDAgNHB4O1xuICB3aWR0aDogMTAwJTtcblxuICAmOjpmaXJzdC1jaGlsZCB7XG4gICAgbWFyZ2luLXRvcDogMTJweDtcbiAgfVxuXG4gICY6bGFzdC1jaGlsZCB7XG4gICAgbWFyZ2luLWJvdHRvbTogMHB4O1xuICB9XG5cbiAgJHtTdHlsZWRMYWJlbH0ge1xuICAgIGJhY2tncm91bmQ6ICR7KHsgYWN0aXZlLCB2YWx1ZSB9KSA9PiBnZXRCYWNrZ3JvdW5kQ29sb3IoYWN0aXZlLCB2YWx1ZSl9O1xuICAgIGZvbnQtd2VpZ2h0OiA0MDA7XG4gICAgdXNlci1zZWxlY3Q6IG5vbmU7XG4gICAgbWFyZ2luOiAwIC0xNnB4O1xuICAgIGJvcmRlci1yYWRpdXM6IDA7XG4gICAgcGFkZGluZzogNnB4IDEycHg7XG5cbiAgICAmOmhvdmVyIHtcbiAgICAgIGJhY2tncm91bmQ6ICR7KHsgdmFsdWUgfSkgPT4gKHZhbHVlID8gY29sb3IuQjEwMCA6IGNvbG9yLk4xMDApfTtcbiAgICAgIGxhYmVsIHtcbiAgICAgICAgY29sb3I6ICR7Y29sb3IuTjYwMH07XG4gICAgICB9XG4gICAgfVxuICB9XG5gO1xuXG5leHBvcnQgZGVmYXVsdCBNdWx0aXNlbGVjdE9wdGlvbjtcbiIsICJpbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuZXhwb3J0IGRlZmF1bHQgc3R5bGVkLmRpdmBcbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuYDtcbiIsICJpbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuaW1wb3J0IHsgVGV4dCB9IGZyb20gJ0B3ZWRnZWtpdC9wcmltaXRpdmVzJztcblxuLy8gVE9ETzogW0pVTi00ODFdIEVpdGhlciBzdGFuZGFyZGl6ZSBsaW5lLWhlaWdodCBhcyAxLjUgKiBmb250LXNpemUgb3IgcmVtb3ZlIHRoaXMgY29tbW1lbnRcbmNvbnN0IE9wdGlvblRleHQgPSBzdHlsZWQoVGV4dClgXG4gIHBvaW50ZXItZXZlbnRzOiBub25lO1xuICBtYXJnaW46IDhweCAwcHg7XG4gIGxpbmUtaGVpZ2h0OiAxLjVyZW07XG5cbiAgJjpmb2N1cyB7XG4gICAgb3V0bGluZTogbm9uZTtcbiAgfVxuYDtcblxuZXhwb3J0IGRlZmF1bHQgT3B0aW9uVGV4dDtcbiIsICJpbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuaW1wb3J0IHsgSW5wdXRXcmFwcGVyIH0gZnJvbSAnQHdlZGdla2l0L2lucHV0JztcblxuaW1wb3J0IHByaW1pdGl2ZXMsIHsgZ2V0QmFzZVB4IH0gZnJvbSAnQHdlZGdla2l0L3ByaW1pdGl2ZXMnO1xuXG5jb25zdCBPcHRpb25XcmFwcGVyID0gc3R5bGVkLmRpdjx7IHRvZ2dsZVJlZjogUmVhY3QuUmVmT2JqZWN0PEhUTUxEaXZFbGVtZW50PiB9PmBcbiAgb3ZlcmZsb3cteTogYXV0bztcbiAgbWF4LWhlaWdodDogMzB2aDtcbiAgd2lkdGg6ICR7KHsgdG9nZ2xlUmVmIH0pID0+XG4gICAgdG9nZ2xlUmVmLmN1cnJlbnQgJiYgYCR7dG9nZ2xlUmVmLmN1cnJlbnQuY2xpZW50V2lkdGggLSBwcmltaXRpdmVzLmJhc2UgKiA2fXB4YH07XG4gIHBhZGRpbmc6ICR7Z2V0QmFzZVB4KDMpfTtcblxuICAke0lucHV0V3JhcHBlcn0ge1xuICAgIG1hcmdpbjogMHB4O1xuICB9XG5gO1xuXG5leHBvcnQgZGVmYXVsdCBPcHRpb25XcmFwcGVyO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgY29sb3IgZnJvbSAnQHdlZGdla2l0L2NvbG9yJztcbmltcG9ydCB7IEN1cnNvck1peGluLCBnZXRCYXNlUHggfSBmcm9tICdAd2VkZ2VraXQvcHJpbWl0aXZlcyc7XG5cbmNvbnN0IGdldEJhY2tncm91bmRDb2xvciA9ICh2YWx1ZTogYm9vbGVhbiwgYWN0aXZlOiBib29sZWFuKSA9PiB7XG4gIGlmICh2YWx1ZSkge1xuICAgIGlmIChhY3RpdmUpIHtcbiAgICAgIHJldHVybiBjb2xvci5CMTAwO1xuICAgIH1cbiAgICByZXR1cm4gY29sb3IuQjIwMDtcbiAgfVxuICBpZiAoYWN0aXZlKSB7XG4gICAgcmV0dXJuIGNvbG9yLk4xMDA7XG4gIH1cbiAgcmV0dXJuIGNvbG9yLk4wNTA7XG59O1xuXG5jb25zdCBTZWxlY3RPcHRpb24gPSBzdHlsZWQuZGl2PHsgYWN0aXZlOiBib29sZWFuOyBkaXNhYmxlZD86IGJvb2xlYW47IHZhbHVlOiBib29sZWFuIH0+YFxuICBhbGlnbi1jb250ZW50OiBjZW50ZXI7XG4gIGJhY2tncm91bmQ6ICR7KHsgdmFsdWUsIGFjdGl2ZSB9KSA9PiBnZXRCYWNrZ3JvdW5kQ29sb3IodmFsdWUsIGFjdGl2ZSl9O1xuICBjdXJzb3I6IHBvaW50ZXI7XG4gIGRpc3BsYXk6IGZsZXg7XG4gIG1hcmdpbjogMCAtJHtnZXRCYXNlUHgoMyl9ICR7Z2V0QmFzZVB4KDEpfSAtJHtnZXRCYXNlUHgoMyl9O1xuICBwYWRkaW5nOiAwICR7Z2V0QmFzZVB4KDMpfTtcbiAgJHtDdXJzb3JNaXhpbn07XG4gIHRyYW5zaXRpb246IGJhY2tncm91bmQgMC4ycyBlYXNlLW91dDtcblxuICAmIGRpdiB7XG4gICAgZmxleDogMTtcbiAgfVxuXG4gICY6Zm9jdXMge1xuICAgIG91dGxpbmU6IG5vbmU7XG4gIH1cblxuICBsYWJlbCB7XG4gICAgZm9udC13ZWlnaHQ6IG5vcm1hbDtcbiAgICAmOmZvY3VzIHtcbiAgICAgIGNvbG9yOiAke2NvbG9yLk42MDB9O1xuICAgIH1cbiAgfVxuXG4gICY6aG92ZXIge1xuICAgIGJhY2tncm91bmQ6ICR7KHsgdmFsdWUgfSkgPT4gKHZhbHVlID8gY29sb3IuQjEwMCA6IGNvbG9yLk4xMDApfTtcbiAgICBsYWJlbCB7XG4gICAgICBjb2xvcjogJHtjb2xvci5ONjAwfTtcbiAgICB9XG4gIH1cbmA7XG5cbmV4cG9ydCBkZWZhdWx0IFNlbGVjdE9wdGlvbjtcbiIsICJpbXBvcnQgc3R5bGVkIGZyb20gJ3N0eWxlZC1jb21wb25lbnRzJztcblxuY29uc3QgU3BhY2UgPSBzdHlsZWQuZGl2YFxuICBmbGV4OiAxO1xuYDtcblxuZXhwb3J0IGRlZmF1bHQgU3BhY2U7XG4iLCAiaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmltcG9ydCBjb2xvciBmcm9tICdAd2VkZ2VraXQvY29sb3InO1xuaW1wb3J0IFBvcG92ZXIgZnJvbSAnQHdlZGdla2l0L3BvcG92ZXInO1xuXG5leHBvcnQgZGVmYXVsdCBzdHlsZWQoUG9wb3ZlcilgXG4gIGJhY2tncm91bmQ6ICR7Y29sb3IuTjA1MH07XG5gO1xuIiwgImltcG9ydCB7IE9wdGlvblByb3BzIH0gZnJvbSAnQHdlZGdla2l0L2NoZWNrYm94LWxpc3QnO1xuXG50eXBlIEluc2lkZUxhYmVsVHlwZSA9IHtcbiAgb3B0aW9uczogT3B0aW9uUHJvcHNbXTtcbiAgcGxhY2Vob2xkZXI6IHN0cmluZztcbiAgdmFsdWU/OiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0ICh7IG9wdGlvbnMsIHZhbHVlLCBwbGFjZWhvbGRlciB9OiBJbnNpZGVMYWJlbFR5cGUpID0+IHtcbiAgaWYgKCF2YWx1ZSB8fCB2YWx1ZS5sZW5ndGggPT09IDApIHtcbiAgICByZXR1cm4gcGxhY2Vob2xkZXI7XG4gIH1cblxuICByZXR1cm4gdmFsdWUucmVkdWNlKChhY2MsIGN1cikgPT4ge1xuICAgIGNvbnN0IHZhbHVlSXNPcHRpb24gPSBvcHRpb25zLmZpbmQoKG9wdGlvbjogT3B0aW9uUHJvcHMpID0+IG9wdGlvbi5pZCA9PT0gY3VyKTtcbiAgICBpZiAoIXZhbHVlSXNPcHRpb24pIHtcbiAgICAgIHJldHVybiBhY2MgPT09ICcnID8gcGxhY2Vob2xkZXIgOiBhY2M7XG4gICAgfVxuICAgIGNvbnN0IG5hbWUgPSB2YWx1ZUlzT3B0aW9uLmxhYmVsO1xuXG4gICAgaWYgKGFjYyAhPT0gJycpIHtcbiAgICAgIHJldHVybiBgJHthY2N9LCAke25hbWV9YDtcbiAgICB9XG4gICAgcmV0dXJuIGAke25hbWV9YDtcbiAgfSwgYGApO1xufTtcbiIsICJpbXBvcnQgeyBPcHRpb25Qcm9wcyB9IGZyb20gJ0B3ZWRnZWtpdC9jaGVja2JveC1saXN0JztcblxudHlwZSBJbnNpZGVMYWJlbFR5cGUgPSB7XG4gIG9wdGlvbnM6IE9wdGlvblByb3BzW107XG4gIHBsYWNlaG9sZGVyOiBzdHJpbmc7XG4gIHZhbHVlOiBzdHJpbmdbXTtcbn07XG5cbmV4cG9ydCBkZWZhdWx0ICh7IG9wdGlvbnMsIHZhbHVlLCBwbGFjZWhvbGRlciB9OiBJbnNpZGVMYWJlbFR5cGUpID0+IHtcbiAgY29uc3QgdmFsdWVJc09wdGlvbiA9IG9wdGlvbnMuZmluZCgob3B0aW9uOiBPcHRpb25Qcm9wcykgPT4gb3B0aW9uLmlkID09PSB2YWx1ZVswXSk7XG4gIGlmICh0eXBlb2YgdmFsdWUgPT09ICd1bmRlZmluZWQnIHx8ICF2YWx1ZUlzT3B0aW9uKSB7XG4gICAgcmV0dXJuIHBsYWNlaG9sZGVyO1xuICB9XG4gIHJldHVybiB2YWx1ZUlzT3B0aW9uLmxhYmVsO1xufTtcbiIsICJpbXBvcnQgUmVhY3QsIHsgdXNlUmVmLCB1c2VTdGF0ZSB9IGZyb20gJ3JlYWN0JztcbmltcG9ydCB7IHY0IGFzIHV1aWQgfSBmcm9tICd1dWlkJztcblxuaW1wb3J0IHsgT3B0aW9uUHJvcHMgfSBmcm9tICdAd2VkZ2VraXQvY2hlY2tib3gtbGlzdCc7XG5pbXBvcnQgeyBDaGV2cm9uIH0gZnJvbSAnQHdlZGdla2l0L2ljb25zJztcbmltcG9ydCBJbmZvQnV0dG9uIGZyb20gJ0B3ZWRnZWtpdC9pbmZvLWJ1dHRvbic7XG5pbXBvcnQgeyBGaWVsZFN0YXR1c1dyYXBwZXIsIFJvdyB9IGZyb20gJ0B3ZWRnZWtpdC9wcmltaXRpdmVzJztcblxuaW1wb3J0IHsgV3JhcHBlciwgTmF0aXZlRHJvcGRvd24sIFNlbGVjdFJhdyB9IGZyb20gJy4vc3R5bGVkJztcbmltcG9ydCB7IENhcmV0LCBEcm9wZG93blRleHQsIExhYmVsIH0gZnJvbSAnLi4vRHJvcGRvd24nO1xuaW1wb3J0IHsgRHJvcGRvd25Qcm9wcyB9IGZyb20gJy4uLy4uL3R5cGVzJztcbmltcG9ydCB7IGdldE11bHRpc2VsZWN0TGFiZWwsIGdldFNlbGVjdExhYmVsIH0gZnJvbSAnLi4vdXRpbHMnO1xuXG5jb25zdCBOYXRpdmVTZWxlY3QgPSBSZWFjdC5mb3J3YXJkUmVmKFxuICAocHJvcHM6IERyb3Bkb3duUHJvcHMsIGZvcndhcmRlZFJlZjogUmVhY3QuUmVmPEhUTUxEaXZFbGVtZW50PikgPT4ge1xuICAgIGNvbnN0IHV1aWRSZWYgPSB1c2VSZWYodXVpZCgpKTtcblxuICAgIGNvbnN0IFtjaGV2cm9uRG93biwgc2V0Q2hldnJvbkRvd25dID0gdXNlU3RhdGUodHJ1ZSk7XG5cbiAgICBjb25zdCBkcm9wZG93blByb3BzOiB7XG4gICAgICAnYXJpYS1sYWJlbCc/OiBzdHJpbmc7XG4gICAgICAnZGF0YS1jeSc/OiBzdHJpbmc7XG4gICAgfSA9IHt9O1xuXG4gICAgaWYgKHByb3BzLmxhYmVsSGlkZGVuKSB7XG4gICAgICBkcm9wZG93blByb3BzWydhcmlhLWxhYmVsJ10gPSBwcm9wcy5sYWJlbDtcbiAgICB9XG5cbiAgICByZXR1cm4gKFxuICAgICAgLy8gVE9ETyBbSlVOLTExOTNdIE1pZ3JhdGUgdGhlc2UgcHJvcHMgdG8gdGhlIGxhYmVsIGluc2lkZSBvZiBNdWx0aXNlbGVjdCBhbmQgUmVtb3ZlIEZpZWxkU3RhdHVzV3JhcHBlclxuICAgICAgPEZpZWxkU3RhdHVzV3JhcHBlclxuICAgICAgICBjbGFzc05hbWU9e3Byb3BzLmNsYXNzTmFtZX1cbiAgICAgICAgZGlzYWJsZWQ9e3Byb3BzLmRpc2FibGVkfVxuICAgICAgICByZWFkT25seT17cHJvcHMucmVhZE9ubHl9XG4gICAgICA+XG4gICAgICAgIHshcHJvcHMubGFiZWxIaWRkZW4gJiYgKFxuICAgICAgICAgIDxSb3cgY2VudGVyPlxuICAgICAgICAgICAgPExhYmVsIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH0gaHRtbEZvcj17dXVpZFJlZi5jdXJyZW50fSByZXF1aXJlZD17cHJvcHMucmVxdWlyZWR9PlxuICAgICAgICAgICAgICB7cHJvcHMubGFiZWx9XG4gICAgICAgICAgICA8L0xhYmVsPlxuICAgICAgICAgICAge3Byb3BzLmluZm8gJiYgPEluZm9CdXR0b24gaW5mbz17cHJvcHMuaW5mb30gdGFiSW5kZXg9e3Byb3BzLnRhYkluZGV4fSAvPn1cbiAgICAgICAgICA8L1Jvdz5cbiAgICAgICAgKX1cbiAgICAgICAgPFdyYXBwZXI+XG4gICAgICAgICAgPFNlbGVjdFJhd1xuICAgICAgICAgICAgbXVsdGlwbGVcbiAgICAgICAgICAgIHJlcXVpcmVkPXtwcm9wcy5yZXF1aXJlZH1cbiAgICAgICAgICAgIG9uQmx1cj17KGUpID0+IHtcbiAgICAgICAgICAgICAgc2V0Q2hldnJvbkRvd24odHJ1ZSk7XG4gICAgICAgICAgICAgIGlmIChwcm9wcy5vbkJsdXIpIHtcbiAgICAgICAgICAgICAgICBwcm9wcy5vbkJsdXIoZSk7XG4gICAgICAgICAgICAgIH1cbiAgICAgICAgICAgIH19XG4gICAgICAgICAgICBvbkNoYW5nZT17KGUpID0+XG4gICAgICAgICAgICAgIHByb3BzLm9uQ2hhbmdlKFxuICAgICAgICAgICAgICAgIFsuLi5lLnRhcmdldC5zZWxlY3RlZE9wdGlvbnNdLm1hcCgob3B0aW9uKSA9PiBvcHRpb24udmFsdWUpLFxuICAgICAgICAgICAgICAgIGUsXG4gICAgICAgICAgICAgIClcbiAgICAgICAgICAgIH1cbiAgICAgICAgICAgIG9uRm9jdXM9eyhlKSA9PiB7XG4gICAgICAgICAgICAgIHNldENoZXZyb25Eb3duKGZhbHNlKTtcbiAgICAgICAgICAgICAgaWYgKHByb3BzLm9uRm9jdXMpIHtcbiAgICAgICAgICAgICAgICBwcm9wcy5vbkZvY3VzKGUpO1xuICAgICAgICAgICAgICB9XG4gICAgICAgICAgICB9fVxuICAgICAgICAgICAgey4uLmRyb3Bkb3duUHJvcHN9XG4gICAgICAgICAgPlxuICAgICAgICAgICAge3Byb3BzLm9wdGlvbnMubWFwKChvcHRpb246IE9wdGlvblByb3BzKSA9PiAoXG4gICAgICAgICAgICAgIDxvcHRpb25cbiAgICAgICAgICAgICAgICB2YWx1ZT17b3B0aW9uLmlkfVxuICAgICAgICAgICAgICAgIHNlbGVjdGVkPXshIXByb3BzLnZhbHVlLmZpbmQoKHZhbHVlKSA9PiB2YWx1ZSA9PT0gb3B0aW9uLmlkKX1cbiAgICAgICAgICAgICAgICBkaXNhYmxlZD17b3B0aW9uLmRpc2FibGVkfVxuICAgICAgICAgICAgICA+XG4gICAgICAgICAgICAgICAge29wdGlvbi5sYWJlbH1cbiAgICAgICAgICAgICAgPC9vcHRpb24+XG4gICAgICAgICAgICApKX1cbiAgICAgICAgICA8L1NlbGVjdFJhdz5cbiAgICAgICAgICA8TmF0aXZlRHJvcGRvd25cbiAgICAgICAgICAgIGRpc2FibGVkPXtwcm9wcy5kaXNhYmxlZH1cbiAgICAgICAgICAgIGludmFsaWQ9e3Byb3BzLmludmFsaWR9XG4gICAgICAgICAgICBsYWJlbEhpZGRlbj17cHJvcHMubGFiZWxIaWRkZW59XG4gICAgICAgICAgICByZWFkT25seT17cHJvcHMucmVhZE9ubHl9XG4gICAgICAgICAgICByZWY9e2ZvcndhcmRlZFJlZn1cbiAgICAgICAgICAgIHN0YXR1cz17cHJvcHMuc3RhdHVzfVxuICAgICAgICAgID5cbiAgICAgICAgICAgIDxEcm9wZG93blRleHRcbiAgICAgICAgICAgICAgaHRtbEZvcj17dXVpZFJlZi5jdXJyZW50fVxuICAgICAgICAgICAgICBkaXNhYmxlZD17cHJvcHMuZGlzYWJsZWR9XG4gICAgICAgICAgICAgIHJlcXVpcmVkPXtwcm9wcy5yZXF1aXJlZH1cbiAgICAgICAgICAgID5cbiAgICAgICAgICAgICAge3Byb3BzLm11bHRpcGxlXG4gICAgICAgICAgICAgICAgPyBnZXRNdWx0aXNlbGVjdExhYmVsKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogcHJvcHMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHByb3BzLnBsYWNlaG9sZGVyIHx8ICdTZWxlY3Qgb3B0aW9uKHMpJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgfSlcbiAgICAgICAgICAgICAgICA6IGdldFNlbGVjdExhYmVsKHtcbiAgICAgICAgICAgICAgICAgICAgb3B0aW9uczogcHJvcHMub3B0aW9ucyxcbiAgICAgICAgICAgICAgICAgICAgcGxhY2Vob2xkZXI6IHByb3BzLnBsYWNlaG9sZGVyIHx8ICdTZWxlY3Qgb25lJyxcbiAgICAgICAgICAgICAgICAgICAgdmFsdWU6IHByb3BzLnZhbHVlLFxuICAgICAgICAgICAgICAgICAgfSl9XG4gICAgICAgICAgICA8L0Ryb3Bkb3duVGV4dD5cbiAgICAgICAgICAgIDxDYXJldD5cbiAgICAgICAgICAgICAgPENoZXZyb25cbiAgICAgICAgICAgICAgICBjb2xvcj17cHJvcHMuZGlzYWJsZWQgPyAnTjQwMCcgOiAnTjYwMCd9XG4gICAgICAgICAgICAgICAgZGlyZWN0aW9uPXtjaGV2cm9uRG93biA/ICdkb3duJyA6ICd1cCd9XG4gICAgICAgICAgICAgIC8+XG4gICAgICAgICAgICA8L0NhcmV0PlxuICAgICAgICAgIDwvTmF0aXZlRHJvcGRvd24+XG4gICAgICAgIDwvV3JhcHBlcj5cbiAgICAgIDwvRmllbGRTdGF0dXNXcmFwcGVyPlxuICAgICk7XG4gIH0sXG4pO1xuXG5leHBvcnQgZGVmYXVsdCBOYXRpdmVTZWxlY3Q7XG4iLCAiaW1wb3J0IHN0eWxlZCBmcm9tICdzdHlsZWQtY29tcG9uZW50cyc7XG5cbmNvbnN0IE1vYmlsZVNlbGVjdFdyYXBwZXIgPSBzdHlsZWQuZGl2YFxuICBwb3NpdGlvbjogcmVsYXRpdmU7XG4gIHotaW5kZXg6IDA7XG5gO1xuXG5leHBvcnQgZGVmYXVsdCBNb2JpbGVTZWxlY3RXcmFwcGVyO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgeyBEcm9wZG93bldyYXBwZXIgfSBmcm9tICcuLi8uLi9Ecm9wZG93bic7XG5cbmV4cG9ydCBkZWZhdWx0IHN0eWxlZChEcm9wZG93bldyYXBwZXIpYFxuICBwb3NpdGlvbjogYWJzb2x1dGU7XG4gIHotaW5kZXg6IC0xO1xuICB0b3A6IDA7XG4gIGxlZnQ6IDA7XG5gO1xuIiwgImltcG9ydCBzdHlsZWQgZnJvbSAnc3R5bGVkLWNvbXBvbmVudHMnO1xuXG5pbXBvcnQgeyBVcGRhdGVkSW5wdXRNaXhpbiB9IGZyb20gJ0B3ZWRnZWtpdC9wcmltaXRpdmVzJztcblxuZXhwb3J0IGRlZmF1bHQgc3R5bGVkLnNlbGVjdGBcbiAgJHtVcGRhdGVkSW5wdXRNaXhpbn07XG4gIGFwcGVhcmFuY2U6IG5vbmU7XG4gIGNvbG9yOiB0cmFuc3BhcmVudDtcbiAgYmFja2dyb3VuZC1jb2xvcjogdHJhbnNwYXJlbnQ7XG4gIGJveC1zaGFkb3c6IG5vbmU7XG4gIHdpZHRoOiAxMDAlO1xuYDtcbiIsICJpbXBvcnQgUmVhY3QgZnJvbSAncmVhY3QnO1xuXG5pbXBvcnQgeyBicm93c2VyIH0gZnJvbSAnQGRtc2kvY29yZSc7XG5cbmltcG9ydCB7IERyb3Bkb3duUHJvcHMsIFNlbGVjdFByb3BzIH0gZnJvbSAnLi4vdHlwZXMnO1xuaW1wb3J0IHsgRHJvcGRvd24sIE5hdGl2ZSB9IGZyb20gJy4uL3NoYXJlZCc7XG5cbmNvbnN0IFNlbGVjdCA9IFJlYWN0LmZvcndhcmRSZWYoXG4gIChcbiAgICBwcm9wczogT21pdDxEcm9wZG93blByb3BzLCBrZXlvZiBTZWxlY3RQcm9wcyB8ICdhY3Rpb25CYXInPiAmIFNlbGVjdFByb3BzLFxuICAgIHJlZj86IFJlYWN0LlJlZjxIVE1MRGl2RWxlbWVudD4sXG4gICkgPT4ge1xuICAgIGNvbnN0IG9wdGlvbnMgPSBwcm9wcy5kZWxpYmxlXG4gICAgICA/IFtcbiAgICAgICAgICB7XG4gICAgICAgICAgICBpZDogdHlwZW9mIHByb3BzLmRlbGlibGUgPT09ICdvYmplY3QnID8gcHJvcHMuZGVsaWJsZS5pZCA6ICdERUxJQkxFX09QVElPTl9JRCcsXG5cbiAgICAgICAgICAgIGxhYmVsOiAodHlwZW9mIHByb3BzLmRlbGlibGUgPT09ICdvYmplY3QnICYmIHByb3BzLmRlbGlibGUubGFiZWwpIHx8ICctLS0nLFxuICAgICAgICAgIH0sXG5cbiAgICAgICAgICAuLi5wcm9wcy5vcHRpb25zLFxuICAgICAgICBdXG4gICAgICA6IHByb3BzLm9wdGlvbnM7XG5cbiAgICBjb25zdCB2YWx1ZSA9IFtwcm9wcy52YWx1ZV07XG5cbiAgICBjb25zdCBvbkNoYW5nZSA9IChcbiAgICAgIG5ld1ZhbHVlOiBzdHJpbmdbXSxcbiAgICAgIGV2ZW50OiBSZWFjdC5Nb3VzZUV2ZW50PEhUTUxEaXZFbGVtZW50PiB8IFJlYWN0LkNoYW5nZUV2ZW50PEhUTUxTZWxlY3RFbGVtZW50PixcbiAgICApID0+IHtcbiAgICAgIHByb3BzLm9uQ2hhbmdlKG5ld1ZhbHVlWzBdIHx8ICcnLCBldmVudCk7XG4gICAgfTtcblxuICAgIHJldHVybiAoXG4gICAgICA8PlxuICAgICAgICB7YnJvd3Nlci5tb2JpbGUgPyAoXG4gICAgICAgICAgPE5hdGl2ZSB7Li4ucHJvcHN9IG9wdGlvbnM9e29wdGlvbnN9IHJlZj17cmVmfSB2YWx1ZT17dmFsdWV9IG9uQ2hhbmdlPXtvbkNoYW5nZX0gLz5cbiAgICAgICAgKSA6IChcbiAgICAgICAgICA8RHJvcGRvd24gey4uLnByb3BzfSBvcHRpb25zPXtvcHRpb25zfSByZWY9e3JlZn0gdmFsdWU9e3ZhbHVlfSBvbkNoYW5nZT17b25DaGFuZ2V9IC8+XG4gICAgICAgICl9XG4gICAgICA8Lz5cbiAgICApO1xuICB9LFxuKTtcblxuZXhwb3J0IGRlZmF1bHQgU2VsZWN0O1xuIl0sCiAgIm1hcHBpbmdzIjogIjtBQUFBO0FBRUE7OztBQ0ZBO0FBQ0E7QUFDQTtBQUlBO0FBQ0E7QUFDQTtBQUNBOzs7QUNUQTtBQUVBO0FBQ0E7QUFHQSxJQUFNLFFBQVEsT0FBTztBQUFBO0FBQUEsa0JBRUgsVUFBVTtBQUFBLFlBQ2hCLFVBQVU7QUFBQSxtQkFDSCxXQUFXLE9BQU87QUFBQTtBQUFBLHNCQUVmLE1BQU07QUFBQSxXQUNqQixNQUFNO0FBQUEsaUJBQ0EsV0FBVztBQUFBLGlCQUNYLFdBQVcsV0FBVztBQUFBO0FBQUEsZUFFeEIsV0FBVyxTQUFTO0FBQUEsSUFDL0IsQ0FBQyxDQUFFLGNBQWU7QUFDbEIsUUFBTSxZQUFZLHNDQUFVLFdBQVcsV0FBVTtBQUNqRCxTQUFPLFVBQVUsV0FBVyxPQUFRLEtBQUksSUFB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
