import C,{useEffect as O,useRef as A,useState as H}from"react";import{useContainingBlock as L}from"@wedgekit/hooks";import D from"react-merge-refs";import{setProperty as p}from"dot-prop";var u=16,F=(e,o,t)=>{let i={},n=(t==null?void 0:t.offset)||u;return(t==null?void 0:t.side)==="left"||(t==null?void 0:t.side)==="right"?((t==null?void 0:t.side)==="left"?p(i,"left",e.left-o.width-n):p(i,"left",e.right+n),(t==null?void 0:t.align)==="end"?p(i,"top",e.bottom-o.height):(t==null?void 0:t.align)==="center"?p(i,"top",e.top+(e.height/2-o.height/2)):p(i,"top",e.top)):((t==null?void 0:t.side)==="top"?p(i,"top",e.top-o.height-n):p(i,"top",e.bottom+n),(t==null?void 0:t.align)==="end"?p(i,"left",e.right-o.width):(t==null?void 0:t.align)==="center"?p(i,"left",e.left+(e.width/2-o.width/2)):p(i,"left",e.left)),i},d=F;import{setProperty as s}from"dot-prop";var B=e=>{let o={};return e.top<0&&s(o,"top",e.top),e.left<0&&s(o,"left",e.left),e.bottom>window.innerHeight&&s(o,"bottom",window.innerHeight-e.bottom),e.right>window.innerWidth&&s(o,"right",window.innerWidth-e.right),o},x=B;import T from"styled-components";import{FocusOn as W}from"react-focus-on";var M=T(W)`
  border: 1px solid #d9d9d9;
  box-sizing: border-box;
  box-shadow: 0px 1px 4px rgba(0, 0, 0, 0.2);
  border-radius: 4px;
  position: fixed;
  height: max-content;
  width: max-content;
  top: ${({top:e})=>e?`${e}px`:"initial"};
  left: ${({left:e})=>e?`${e}px`:"initial"};
  isolation: isolate;
  z-index: 1;
`,E=M;import{useContainerEvent as N}from"@wedgekit/hooks";var V=(e,o)=>{N(e,{scroll:(t,i)=>{i||o(t)}})},h=V;var $=C.forwardRef((e,o)=>{let{bearings:t,children:i,className:n,node:y,onExit:m,...S}=e,f=A(null),k=D([f,o]),[P,c]=H({}),{distance:a}=L(y,"fixed");return O(()=>{f.current&&c(d(a,f.current.getBoundingClientRect(),t))},[y,JSON.stringify(t)]),O(()=>{if(f.current&&Object.keys(P).length){let l=x(f.current.getBoundingClientRect());if(Object.keys(l).length)if(t==null?void 0:t.fallback)c(d(a,f.current.getBoundingClientRect(),{side:t.fallback[0],align:t.fallback[1],offset:t.offset}));else{let v=(t==null?void 0:t.offset)||u,w=(r,[R,g])=>{if(typeof r=="number"){if(typeof l[R]=="number")return r-l[R];if(typeof l[g]=="number")return r+v+l[g]}return r};c(r=>({top:w(r.top,["top","bottom"]),left:w(r.left,["left","right"])}))}}},[f.current]),h(f,m),C.createElement(E,{className:n,ref:k,onClickOutside:m,onEscapeKey:m,...P,...S},i)}),j=$;export{j as default};
