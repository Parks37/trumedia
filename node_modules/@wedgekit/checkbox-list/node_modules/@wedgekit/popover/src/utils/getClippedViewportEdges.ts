import { setProperty as set } from 'dot-prop';

type ViewportEdge = 'top' | 'bottom' | 'left' | 'right';
type ClippedEdges = Partial<Record<ViewportEdge, number>>;

// clippedInViewport checks if an element is not fully rendered in the viewport and returns which
// edges of the viewport are cut off
const getClippedEdges = (rect: ClientRect): ClippedEdges => {
  const clippedEdges: ClippedEdges = {};

  if (rect.top < 0) {
    set(clippedEdges, 'top', rect.top);
  }
  if (rect.left < 0) {
    set(clippedEdges, 'left', rect.left);
  }
  if (rect.bottom > window.innerHeight) {
    set(clippedEdges, 'bottom', window.innerHeight - rect.bottom);
  }
  if (rect.right > window.innerWidth) {
    set(clippedEdges, 'right', window.innerWidth - rect.right);
  }

  return clippedEdges;
};

export default getClippedEdges;
