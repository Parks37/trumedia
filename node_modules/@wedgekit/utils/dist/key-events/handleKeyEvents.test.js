import n from"ava";import c,{processKeys as o}from"./handleKeyEvent";const s=(e,a=()=>{})=>({key:e,preventDefault:a});n("Key Events - Basic Test",e=>{e.plan(1),c({Enter:()=>e.pass("It should call a basic callback")})(s("Enter"))}),n("Key Events - Don't Fire Callback",e=>{e.plan(0),c({Enter:()=>e.fail("It should not call when the key is not pressed")})(s("Escape"))}),n("Key Events - Multiple Keys",e=>{e.plan(2);const l=c({"Enter|\\s":()=>e.pass("It should optionally take multiple keys")});l(s("Enter")),l(s(" "))}),n("Key Events - Specificity",e=>{e.plan(0),c({Escape:()=>e.fail("It should not call the callback when a different key is pressed.")})(s("Enter"))}),n("Key Events - Callback Argument",e=>{e.plan(1);const a=s("Enter");c({Enter:t=>e.is(t,a)})(a)}),n("Key Events - Multiple Executed Callbacks",e=>{e.plan(2);const a=()=>e.pass("It should call the callback twice");c({Enter:a,"Enter|\\s":a,Tab:()=>e.fail("Tab does not match the event trigger")})(s("Enter"))}),n("Key Events - Prevent Default",e=>{e.plan(2);const a=()=>e.pass("It should call the callback once");c({Enter:a,"Enter|\\s":a,Tab:()=>e.fail("Tab does not match the event trigger")})(s(" ",()=>e.pass("It should prevent the default action once")))}),n("Process Keys",e=>{e.plan(18);const a=()=>{},l=()=>{},r=()=>{},t=o({Enter:a,"Enter|\\s":l,Tab:r});e.true(t[0].key.test("Enter")),e.true(t[0].key.test("enter")),e.false(t[0].key.test(" ")),e.false(t[0].key.test("Tab")),e.false(t[0].key.test("tab")),e.is(t[0].callback,a),e.true(t[1].key.test("Enter")),e.true(t[1].key.test("enter")),e.true(t[1].key.test(" ")),e.false(t[1].key.test("Tab")),e.false(t[1].key.test("tab")),e.is(t[1].callback,l),e.false(t[2].key.test("Enter")),e.false(t[2].key.test("enter")),e.false(t[2].key.test(" ")),e.true(t[2].key.test("Tab")),e.true(t[2].key.test("tab")),e.is(t[2].callback,r)});
