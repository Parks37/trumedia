# @wedgekit/scripts Guides

## Custom Configs

### tsconfig

`@wedgekit/scripts build` (**PACKAGES only**) will extend a `tsconfig.json` at the root of your project if one is provided. This can allow you to, for example, provide a types file to `tsc`

`tsconfig.json`

```json
{
  "files": ["types.d.ts"]
}
```

`types.d.ts`

```
declare module `@wedgekit/core`;
```

## Environment Variables

**‚ú®Ô∏è Applications Only ‚ú®**

> An environment variable is a value that is set outside the application. These are usually variables necessary for app config. Examples include API URLs or application versions.

‚ö†Ô∏è To avoid possible conflicts, all environment variables must be prefixed with `WEDGEKIT_` (e.g. `WEDGEKIT_YOUR_CUSTOM_VARIABLE`)

### How to Define Environment Variables

Create a `.env` file in the root directory of the application. Add environment variables on new lines as `NAME=VALUE`

```
WEDGEKIT_USER=bucky
WEDGEKIT_PASSWORD=123
```

### How to Use Environment Variables

To use an environment variable, use `process.env[VARIABLE_NAME]`

```typescript jsx
<div>{process.env.WEDGEKIT_USER}</div>
```

üöß _Note: `@wedgekit/scripts` does not yet provide a way to access environment variables in the `index.html`. This is on a future roadmap._

## Subpaths

**‚ú®Ô∏è Packages Only ‚ú®**

> In some cases, a package developer may wish to provide consuming apps more targeted import statements. This is provided in the form of `<namespace>/<subpath>`. For example, the developer of `@wedgekit/foo` might want consuming apps to be able to `import Bar from '@wedgekit/foo/bar`.

### Building for Subpaths

If you want to provide subpaths for your package, use the `--unbundled` flag when building. This will include the unbundled files in the `dist/` folder.

### Additional Setup for Subpaths

1. The `package.json` will need to define subpaths via [exports](https://nodejs.org/api/packages.html#packages_subpath_exports)
2. In order for TypeScript to work correctly, you may want to provide the following `typesVersions` in the `package.json` [source](https://github.com/microsoft/TypeScript/issues/33079#issuecomment-872431024)

```json
"typesVersions": {
  "*": {
    "*": [ "dist/*", "dist/index.d.ts", "dist/*/index.d.ts" ]
  }
}
```

‚ö†Ô∏è Subpaths do not work with all bundlers - notably the version of Webpack bundled with CRA. As such, you should still define `main` and `module` in your `package.json`
