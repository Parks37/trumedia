import chalk from 'chalk';
import messages from '@utils/messages';
import mkdir from './mkdir';
import scaffold from './scaffold';
import { availableTemplateFlagOptions } from './utils/templateOptions';
const create = async (name, opts) => {
    process.stdout.write(messages.header('creating', chalk.bold(`${name}`)));
    if (opts.package) {
        process.stderr.write(messages.warning('⚠️ ', chalk.underline('wedgekit create'), 'is only configured for web apps.'));
        process.exitCode = 1;
    }
    else if (opts.template && !availableTemplateFlagOptions.includes(opts.template)) {
        process.stderr.write(messages.error(chalk.underline('wedgekit create'), `is not configured for template type ${opts.template}`));
        process.exitCode = 1;
    }
    else {
        // Check for the existence of a directory at the specified location and creates it if necessary.
        await mkdir(opts.dir || name);
        // Provide a basic app in the indicated directory
        await scaffold({ name, ...opts });
    }
};
export default create;
